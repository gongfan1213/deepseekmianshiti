> ğŸ’­ å¥½çš„ï¼Œæˆ‘ç°åœ¨åœ¨å¸®åŠ©ä¸€ä¸ªç”¨æˆ·è§£å†³å¦‚ä½•å°†ç°æœ‰çš„Reactä»£ç åº“é€æ­¥è¿ç§»åˆ°TypeScriptçš„é—®é¢˜ã€‚ç”¨æˆ·å¯èƒ½å·²ç»æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„Reacté¡¹ç›®ï¼Œç°åœ¨æƒ³å¼•å…¥TypeScriptçš„ç±»å‹ç³»ç»Ÿï¼Œä½†éœ€è¦çŸ¥é“å…·ä½“çš„æ­¥éª¤å’Œå¿…é¡»ä½¿ç”¨çš„é«˜çº§ç‰¹æ€§ã€‚
>
> é¦–å…ˆï¼Œç”¨æˆ·å¯èƒ½æ˜¯å›¢é˜Ÿçš„æŠ€æœ¯è´Ÿè´£äººæˆ–è€…æ ¸å¿ƒå¼€å‘è€…ï¼Œä»–ä»¬å¯èƒ½å·²ç»æ„è¯†åˆ°JavaScriptåœ¨å¤§å‹é¡¹ç›®ä¸­çš„ç»´æŠ¤æˆæœ¬è¾ƒé«˜ï¼Œå¸Œæœ›é€šè¿‡TypeScriptæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå‡å°‘é”™è¯¯ã€‚è¿ç§»è¿‡ç¨‹éœ€è¦å°½é‡å¹³æ»‘ï¼Œä¸å½±å“ç°æœ‰åŠŸèƒ½çš„å¼€å‘ï¼Œæ‰€ä»¥éœ€è¦é€æ­¥è¿›è¡Œï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§é‡å†™æ‰€æœ‰ä»£ç ã€‚ä»–ä»¬ä¹Ÿå¯èƒ½ä¼šæ‹…å¿ƒè¿ç§»è¿‡ç¨‹ä¸­çš„ä¸€äº›æŒ‘æˆ˜ï¼Œæ¯”å¦‚ç±»å‹å®šä¹‰ã€ç¬¬ä¸‰æ–¹åº“çš„æ”¯æŒã€æ„å»ºå·¥å…·çš„é…ç½®ç­‰ã€‚
>
> æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦å›å¿†TypeScriptåœ¨Reacté¡¹ç›®ä¸­çš„æœ€ä½³å®è·µï¼Œç‰¹åˆ«æ˜¯è¿ç§»æ­¥éª¤ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿ç§»åº”è¯¥ä»é…ç½®TypeScriptç¯å¢ƒå¼€å§‹ï¼ŒåŒ…æ‹¬å®‰è£…å¿…è¦çš„ä¾èµ–ï¼ˆtypescriptã€@types/reactç­‰ï¼‰ï¼Œè°ƒæ•´æ„å»ºå·¥å…·ï¼ˆæ¯”å¦‚Webpackæˆ–Babelï¼‰æ¥æ”¯æŒTS/TSXæ–‡ä»¶ï¼Œç„¶åé€æ­¥å°†æ–‡ä»¶ä».js/.jsxé‡å‘½åä¸º.ts/.tsxï¼ŒåŒæ—¶æ·»åŠ ç±»å‹æ³¨è§£ã€‚åŒæ—¶ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦å…ˆå¤„ç†ä¸€äº›é€šç”¨çš„å·¥å…·å‡½æ•°æˆ–è€…ç»„ä»¶ï¼Œé€æ¸è¦†ç›–æ•´ä¸ªé¡¹ç›®ã€‚
>
> å…³äºå¿…é¡»ä½¿ç”¨çš„é«˜çº§ç‰¹æ€§ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘TypeScriptçš„é«˜çº§ç±»å‹ï¼Œå¦‚æ³›å‹ã€è”åˆç±»å‹ã€ç±»å‹å®ˆå«ã€æ˜ å°„ç±»å‹ã€æ¡ä»¶ç±»å‹ç­‰ã€‚æ­¤å¤–ï¼ŒReactç›¸å…³çš„ç±»å‹å¦‚ç»„ä»¶ç±»å‹ï¼ˆFCã€ReactElementï¼‰ã€Hooksçš„ç±»å‹å®šä¹‰ï¼ˆuseStateã€useEffectç­‰ï¼‰ã€é«˜é˜¶ç»„ä»¶å’ŒContextçš„ç±»å‹å¤„ç†éƒ½æ˜¯å…³é”®ã€‚è¿˜æœ‰å¦‚ä½•å¤„ç†ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹å®šä¹‰ï¼Œå¦‚æœæ²¡æœ‰ç°æˆçš„@typesåŒ…ï¼Œå¯èƒ½éœ€è¦è‡ªå·±å£°æ˜æ¨¡å—æˆ–è€…ä½¿ç”¨anyæš‚æ—¶ç»•è¿‡ã€‚
>
> å¯èƒ½çš„ç—›ç‚¹åŒ…æ‹¬ç°æœ‰ä»£ç ä¸­å¤§é‡ä½¿ç”¨PropTypesï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºTypeScriptæ¥å£ï¼›å¦‚ä½•å¤„ç†Reduxæˆ–Context APIä¸­çš„å¤æ‚çŠ¶æ€ç±»å‹ï¼›å¦‚ä½•å¤„ç†åŠ¨æ€å±æ€§æˆ–å¯é€‰å±æ€§ã€‚ç”¨æˆ·å¯èƒ½è¿˜å…³å¿ƒå¦‚ä½•é€æ­¥è¿ç§»ï¼Œæ¯”å¦‚æ˜¯å¦å¯ä»¥æ··åˆä½¿ç”¨JSå’ŒTSæ–‡ä»¶ï¼Œå¦‚ä½•é…ç½®TypeScriptçš„ä¸¥æ ¼æ¨¡å¼ï¼Œä»¥åŠå¦‚ä½•å¤„ç†æµ‹è¯•ä»£ç ï¼ˆå¦‚Jestï¼‰çš„ç±»å‹æ”¯æŒã€‚
>
> å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“è¿ç§»è¿‡ç¨‹ä¸­çš„å·¥å…·æ”¯æŒï¼Œæ¯”å¦‚ESLintä¸TypeScriptçš„é›†æˆï¼ŒPrettierçš„é…ç½®ï¼Œä»¥åŠç¼–è¾‘å™¨ï¼ˆå¦‚VSCodeï¼‰çš„è‡ªåŠ¨è¡¥å…¨å’Œé”™è¯¯æç¤ºèƒ½å¦é¡ºç•…å·¥ä½œã€‚è¿˜æœ‰ä¸€äº›é«˜çº§æŠ€å·§ï¼Œæ¯”å¦‚ä½¿ç”¨ç±»å‹æ–­è¨€ï¼ˆtype assertionsï¼‰ã€å£°æ˜åˆå¹¶ï¼ˆdeclaration mergingï¼‰æ¥æ‰©å±•ç¬¬ä¸‰æ–¹ç±»å‹ï¼Œæˆ–è€…ä½¿ç”¨å·¥å…·ç±»å‹ï¼ˆUtility Typesï¼‰å¦‚Partialã€Pickã€Omitç­‰æ¥ç®€åŒ–ç±»å‹å®šä¹‰ã€‚
>
> éœ€è¦åˆ†æ­¥éª¤è§£é‡Šè¿ç§»æµç¨‹ï¼Œç¡®ä¿æ¯ä¸ªæ­¥éª¤éƒ½å®¹æ˜“æ‰§è¡Œï¼ŒåŒæ—¶æœ€å°åŒ–å¯¹ç°æœ‰å¼€å‘çš„å½±å“ã€‚ä¾‹å¦‚ï¼Œä¼˜å…ˆå°†é…ç½®æ–‡ä»¶è½¬ä¸ºTypeScriptï¼Œæ¥ç€æ˜¯å·¥å…·å‡½æ•°ï¼Œç„¶åæ˜¯ç»„ä»¶ï¼Œæœ€åæ˜¯Reduxç›¸å…³çš„ä»£ç ã€‚åœ¨æ¯ä¸ªé˜¶æ®µï¼Œé€æ­¥å¼€å¯TypeScriptçš„ä¸¥æ ¼æ£€æŸ¥é€‰é¡¹ï¼Œä»å®½æ¾åˆ°ä¸¥æ ¼ï¼Œé€æ­¥ä¿®å¤ç±»å‹é”™è¯¯ã€‚åŒæ—¶ï¼Œå»ºè®®ä½¿ç”¨ts-checkæ³¨é‡Šåœ¨JavaScriptæ–‡ä»¶ä¸­é€æ­¥å¼•å…¥ç±»å‹æ£€æŸ¥ï¼Œè€Œæ— éœ€ç«‹å³é‡å‘½åæ–‡ä»¶ã€‚
>
> å¯èƒ½è¿˜éœ€è¦æåˆ°å¦‚ä½•å¤„ç†æµ‹è¯•æ–‡ä»¶çš„è¿ç§»ï¼Œæ¯”å¦‚ä½¿ç”¨ts-jestæ¥æ”¯æŒTypeScriptçš„æµ‹è¯•ä»£ç ã€‚ä»¥åŠåœ¨å›¢é˜Ÿä¸­æ¨å¹¿TypeScriptçš„æœ€ä½³å®è·µï¼Œæ¯”å¦‚ä»£ç å®¡æŸ¥æ—¶å…³æ³¨ç±»å‹å®šä¹‰ï¼Œç¼–å†™.d.tsæ–‡ä»¶æ¥è¡¥å……ç¼ºå°‘çš„ç±»å‹å£°æ˜ï¼Œæˆ–è€…ä½¿ç”¨TypeScriptçš„å·¥ç¨‹å¼•ç”¨ï¼ˆProject Referencesï¼‰æ¥åˆ†å‰²å¤§å‹é¡¹ç›®ã€‚
>
> æ­¤å¤–ï¼Œè¿˜éœ€è¦è®¨è®ºå¸¸è§çš„é™·é˜±ï¼Œæ¯”å¦‚anyçš„æ»¥ç”¨å¯èƒ½å¯¼è‡´ç±»å‹å®‰å…¨æ€§çš„ä¸§å¤±ï¼Œå¦‚ä½•é¿å…è¿‡åº¦ä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œä»¥åŠå¦‚ä½•å¤„ç†é—ç•™ä»£ç ä¸­çš„åŠ¨æ€ç±»å‹é—®é¢˜ï¼ˆå¦‚ä½¿ç”¨ç´¢å¼•ç­¾åæˆ–unknownç±»å‹ï¼‰ã€‚åŒæ—¶æ¨èä½¿ç”¨å·¥å…·å¦‚ç±»å‹ç”Ÿæˆå·¥å…·ï¼ˆä¾‹å¦‚ä¸ºReduxç”Ÿæˆç±»å‹ï¼‰æˆ–è€…è‡ªåŠ¨è½¬æ¢å·¥å…·æ¥è¾…åŠ©è¿ç§»ã€‚
>
> æœ€åï¼Œæ€»ç»“å…³é”®æ­¥éª¤å’Œå¿…é¡»æŒæ¡çš„é«˜çº§ç‰¹æ€§ï¼Œç¡®ä¿ç”¨æˆ·æœ‰ä¸€ä¸ªæ¸…æ™°çš„è¿ç§»è·¯çº¿å›¾ï¼Œä»¥åŠå¦‚ä½•åœ¨è¿ç§»è¿‡ç¨‹ä¸­é€æ­¥æé«˜ç±»å‹è¦†ç›–ç‡ï¼Œæœ€ç»ˆè¾¾åˆ°å…¨é¢çš„ç±»å‹å®‰å…¨ã€‚
>
> 



ä»¥ä¸‹æ˜¯ React ä»£ç åº“æ¸è¿›å¼ TypeScript è¿ç§»çš„æŠ€æœ¯è·¯çº¿å›¾ï¼ŒåŒ…å«é˜¶æ®µåˆ†è§£å’Œæ ¸å¿ƒ TS åŠŸèƒ½åº”ç”¨ç­–ç•¥ï¼š

---

### ä¸€ã€æˆ˜ç•¥é˜¶æ®µåˆ’åˆ†ï¼ˆé€†å‘å››é˜¶æ®µæ¨¡å‹ï¼‰

```mermaid
gantt
    title TypeScript è¿ç§»ç”˜ç‰¹å›¾
    dateFormat  YYYY-MM-DD
    section åŸºç¡€å±‚
    æ„å»ºç³»ç»Ÿé…ç½®          :done,    des1, 2023-08-01, 14d
    ç±»å‹å®ˆå«åŸºç¡€æ¨¡å—       :active,  des2, 2023-08-15, 21d
    
    section ç»„ä»¶å±‚
    åŸå­ç»„ä»¶å¼ºç±»å‹åŒ–      :         des3, 2023-09-05, 30d
    Hooks ç±»å‹ç³»ç»Ÿé‡æ„    :         des4, after des3, 25d
    
    section çŠ¶æ€å±‚
    Redux Toolkit é€‚é…   :         des5, after des4, 20d
    å¼‚æ­¥æµç±»å‹æŠ½è±¡        :         des6, after des5, 18d
    
    section ç”Ÿæ€å±‚
    ç¬¬ä¸‰æ–¹åº“ç±»å‹è¡¥å…¨      :         des7, after des6, 30d
    ä¸¥æ ¼æ¨¡å¼å…¨é¢å¯ç”¨      :         des8, after des7, 14d
```

---

### äºŒã€æ ¸å¿ƒè¿ç§»æ­¥éª¤ï¼ˆå¸¦ä»£ä»·è¯„ä¼°ï¼‰

#### æ­¥éª¤ 1ï¼šåŸºç¡€ç¯å¢ƒè´¯é€š
```bash
# æœ€å°åŒ–æ”¹é€ å‘½ä»¤é›†
yarn add -D typescript @types/node @types/react @types/react-dom
npx tsc --init  # ç”Ÿæˆé¢„è®¾é…ç½®
```

å…³é”®æ–‡ä»¶æ”¹é€ ï¼š
```diff
// tsconfig.json
{
  "compilerOptions": {
+   "allowJs": true,
+   "checkJs": true,
    "jsx": "preserve",
+   "strict": false,
+   "paths": {
+     "@/*": ["./src/*"]
+   }
  },
+ "include": ["src/**/*.ts", "src/**/*.tsx"],
+ "exclude": ["node_modules"]
}
```

æˆæœ¬çŸ©é˜µï¼š
| æ”¹é€ é¡¹         | äººå·¥æŠ•å…¥ | é£é™©ç­‰çº§ | æ”¶ç›Šç³»æ•° |
|----------------|----------|----------|----------|
| æ··åˆç¼–è¯‘å¯ç”¨    | 0.5äººæ—¥  | ä½       | â˜…â˜…â˜…â˜…     |
| è·¯å¾„åˆ«åé…ç½®    | 0.3äººæ—¥  | ä¸­       | â˜…â˜…â˜…      |

---

#### æ­¥éª¤ 2ï¼šç±»å‹æ¸—é€ç­–ç•¥
```typescript
// ç¤ºä¾‹ï¼šæ¸è¿›å¢å¼ºå‹ç±»å‹å£°æ˜
declare module '*.js' {
  import { ComponentType } from 'react';
  const Component: ComponentType<Partial<{ className: string }>>;
  export default Component;
}

// ä½¿ç”¨ JSDoc é€æ­¥å¼ºåŒ–ç±»å‹
/**
 * @template T
 * @param {T[]} list 
 * @returns {T extends { id: string } ? T : never}
 */
function findWithId(list) {
  return list.find(item => 'id' in item);
}
```

æ•ˆèƒ½ä¼˜åŒ–æŒ‡æ ‡ï¼š
```mermaid
pie
    title ç±»å‹è¦†ç›–ç‡æå‡è®¡åˆ’
    "é˜¶æ®µ1ï¼ˆæ ¸å¿ƒå·¥å…·ç±»ï¼‰" : 45
    "é˜¶æ®µ2ï¼ˆä¸šåŠ¡å®ä½“å±‚ï¼‰" : 30
    "é˜¶æ®µ3ï¼ˆè§†å›¾ç»„ä»¶å±‚ï¼‰" : 20
    "æ®‹ç•™åŠ¨æ€ç±»å‹" : 5
```

---

### ä¸‰ã€å¿…é¡»æŒæ¡çš„ TS é«˜é˜¶ç‰¹æ€§ï¼ˆReact åœºæ™¯ç‰¹åŒ–ï¼‰

#### 1. ç»„ä»¶ Props æ™ºèƒ½åŒ–
```typescript
type ResponsiveProp<T> = T | T[] | { [breakpoint: string]: T };

interface GridProps {
  columns: ResponsiveProp<number>;
  spacing: ResponsiveProp<number | string>;
}

const Grid: FC<GridProps> = ({ columns = 12 }) => (
  // å¸ƒå±€å®ç°
);
```

#### 2. Redux çŠ¶æ€æœºç±»å‹é—­ç¯
```typescript
type ActionMap<M extends { [index: string]: any }> = {
  [Key in keyof M]: M[Key] extends undefined
    ? { type: Key }
    : { type: Key; payload: M[Key] }
};

type AuthActions = ActionMap<{
  LOGIN: { token: string; expires: number };
  LOGOUT: undefined;
}>[keyof ActionMap<{}>];
```

---

### å››ã€DevOps è‡ªåŠ¨åŒ–æ”¯æ’‘

#### 1. å¢é‡ç±»å‹æ£€æŸ¥è„šæœ¬
```bash
#!/bin/bash
# æ£€æŸ¥æœ€è¿‘ä¿®æ”¹çš„æ–‡ä»¶
git diff --name-only HEAD @{1.day.ago} | grep -E '\.(ts|tsx)$' | xargs tsc --noEmit
```

#### 2. ä»£ç åº“å¥åº·åº¦ç›‘æ§
```javascript
// type-coverage å·¥å…·é›†æˆ
{
  "scripts": {
    "type-check": "tsc --noEmit",
    "type-coverage": "type-coverage --detail"
  }
}
```

---

### äº”ã€è¿ç§»é˜»åŠ›åˆ†è§£æ–¹æ¡ˆ

#### 1. ä¸å¯ç±»å‹åŒ–æ¨¡å¼é€ƒç”Ÿèˆ±è®¾è®¡
```typescript
// ç´§æ€¥é€ƒç”Ÿæ¨¡å¼
type UnsafeAny = {
  [key: string]: any;
  __EMERGENCY_CAST__?: never;
} & any;

const legacyData = (apiResponse as UnsafeAny).oldStructure;
```

#### 2. æˆæœ¬æ§åˆ¶å¯¹ç…§è¡¨
| ç—›ç‚¹ç±»å‹           | çŸ­æœŸå¤„ç†æ–¹æ¡ˆ            | é•¿æœŸä¼˜åŒ–æ–¹æ¡ˆ                    |
|--------------------|-------------------------|---------------------------------|
| å¤æ‚è¡¨å•éªŒè¯       | ç±»å‹æ–­è¨€ + any          | é›†æˆ zod æˆ– yup ç±»å‹ç”Ÿæˆ        |
| åŠ¨æ€ç»„ä»¶åŠ è½½       | æ³›å‹å¼‚æ­¥åŠ è½½å™¨          | é¢„ç¼–è¯‘ç”Ÿæˆç±»å‹æ¸…å•              |
| å¤šæ€é…ç½®å¯¹è±¡       | æ¡ä»¶ç±»å‹åˆ†å‘            | é‡æ„ä¸º discriminated union     |
| é—ç•™ jQuery æ’ä»¶   | å£°æ˜å¹³å®‰ç¬¦æ¨¡å¼          | æ¸è¿›å¼ç»„ä»¶åŒ…è£¹é‡æ„              |

---

### å…­ã€æ•ˆæœè¯„ä¼°çŸ©é˜µ

```mermaid
quadrantChart
    title è¿ç§»æˆæ•ˆå››è±¡é™åˆ†æ
    x-axis å®æ–½æˆæœ¬ â†’ 
    y-axis æ”¶ç›Šç¨‹åº¦ â†‘
    quadrant-1 å…³é”®åŸºç¡€è®¾æ–½
    quadrant-2 æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
    quadrant-3 è¾¹ç¼˜å·¥å…·å‡½æ•°
    quadrant-4 UIç»„ä»¶åº“
    "å·¥å…·ç±»": [0.3, 0.9]
    "å•†å“è¯¦æƒ…é¡µ": [0.7, 0.6]
    "è´­ç‰©è½¦æ¨¡å—": [0.6, 0.8]
    "ç¬¬ä¸‰æ–¹æ”¯ä»˜": [0.8, 0.4]
```

é€šè¿‡ä¸Šè¿°ç»“æ„åŒ–ç­–ç•¥ï¼Œå¯åœ¨ 3-6 ä¸ªæœˆå†…å®Œæˆå¤§å‹ React ä»£ç åº“çš„ç±»å‹è¿ç§»ï¼ŒåˆæœŸç±»å‹è¦†ç›–ç‡åº”è¾¾åˆ° 80% ä»¥ä¸Šï¼Œæœ€ç»ˆç›®æ ‡é”å®šåœ¨ 98% è¦†ç›–ç‡æ—¶å¼€å¯ strict æ¨¡å¼ã€‚
