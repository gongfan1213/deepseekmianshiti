> ğŸ’­ å¥½ï¼Œç”¨æˆ·ç°åœ¨é—®çš„æ˜¯å¦‚ä½•ä½¿ç”¨Node.jsçš„clusteræ¨¡å—æ¥å®ç°é›¶åœæœºçƒ­æ›´æ–°ã€‚ä¹‹å‰çš„å¯¹è¯å·²ç»æ¶µç›–äº†è¿›ç¨‹é—´é€šä¿¡å’Œchild_processçš„ä½¿ç”¨ï¼Œç”¨æˆ·å¯èƒ½æ­£åœ¨å°è¯•æ„å»ºä¸€ä¸ªé«˜å¯ç”¨çš„Node.jsæœåŠ¡ï¼Œéœ€è¦åœ¨ä¸åœæ­¢æœåŠ¡çš„æƒ…å†µä¸‹æ›´æ–°ä»£ç ã€‚ä»–ä»¬å¯èƒ½é‡åˆ°äº†éœ€è¦é‡å¯æœåŠ¡ä½†åˆä¸å¸Œæœ›ä¸­æ–­ç°æœ‰è¿æ¥çš„é—®é¢˜ï¼Œè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­å¸¸è§çš„éœ€æ±‚ã€‚
>
> æˆ‘éœ€è¦å…ˆå›å¿†clusteræ¨¡å—çš„åŸºæœ¬å·¥ä½œåŸç†ã€‚clusterå…è®¸åˆ›å»ºå¤šä¸ªå­è¿›ç¨‹å…±äº«åŒä¸€ä¸ªç«¯å£ï¼Œä¸»è¿›ç¨‹ï¼ˆmasterï¼‰è´Ÿè´£ç®¡ç†å­è¿›ç¨‹ï¼Œé€šå¸¸ç”¨äºåˆ©ç”¨å¤šæ ¸CPUã€‚ç°åœ¨é—®é¢˜æ˜¯å¦‚ä½•åœ¨æ›´æ–°ä»£ç æ—¶ï¼Œé€æ­¥é‡å¯è¿™äº›å­è¿›ç¨‹è€Œä¸ä¸­æ–­æœåŠ¡ã€‚
>
> é›¶åœæœºçƒ­æ›´æ–°çš„å…³é”®åœ¨äºé€ä¸ªé‡å¯workerè¿›ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨é‡å¯ã€‚ä¸»è¿›ç¨‹éœ€è¦èƒ½å¤Ÿæ¥æ”¶ä¿¡å·ï¼ˆå¦‚SIGHUPï¼‰è§¦å‘é‡å¯é€»è¾‘ï¼Œä¾æ¬¡åˆ›å»ºæ–°çš„workerï¼Œå¹¶åœ¨æ–°workerå‡†å¤‡å°±ç»ªåï¼Œé€æ­¥å…³é—­æ—§çš„workerã€‚åŒæ—¶ï¼Œéœ€è¦ç¡®ä¿åœ¨é‡å¯è¿‡ç¨‹ä¸­ï¼Œä»æœ‰workerèƒ½å¤Ÿå¤„ç†è¯·æ±‚ï¼Œé¿å…æœåŠ¡ä¸å¯ç”¨ã€‚
>
> é¦–å…ˆï¼Œç”¨æˆ·å¯èƒ½éœ€è¦çŸ¥é“å¦‚ä½•åœ¨æ”¶åˆ°ä¿¡å·æ—¶é‡å¯workersã€‚æ¯”å¦‚ï¼Œå½“éƒ¨ç½²æ–°ä»£ç åï¼Œå‘é€ä¸€ä¸ªä¿¡å·ç»™ä¸»è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹å¼€å§‹é€ä¸ªé‡å¯ã€‚è¦è®©ä¸»è¿›ç¨‹ç›‘å¬SIGHUPæˆ–è€…å…¶ä»–è‡ªå®šä¹‰ä¿¡å·ã€‚
>
> æ¥ç€ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•è®©æ–°çš„workerè¿›ç¨‹åŠ è½½æœ€æ–°çš„ä»£ç ã€‚ä½¿ç”¨cluster.fork()ä¼šäº§ç”Ÿæ–°çš„workerï¼Œæ­¤æ—¶æ–°çš„workerä¼šæ‰§è¡Œå½“å‰çš„å…¥å£æ–‡ä»¶ï¼Œå¦‚æœä»£ç å·²ç»æ›´æ–°ï¼Œæ–°çš„ä»£ç ä¼šè¢«è½½å…¥ã€‚æ‰€ä»¥å…³é”®åœ¨äºåœ¨é‡å¯è¿‡ç¨‹ä¸­ï¼Œworkerä½¿ç”¨çš„æ˜¯æ›´æ–°åçš„ä»£ç ã€‚
>
> ç„¶åï¼Œå¦‚ä½•ä¼˜é›…åœ°å…³é—­æ—§çš„workerï¼Ÿåœ¨åˆ›å»ºæ–°workeråï¼Œåº”è¯¥å…³é—­æ—§çš„workerï¼Œä½†éœ€è¦ç¡®ä¿æ—§workerå¤„ç†å®Œå½“å‰çš„è¯·æ±‚åå†é€€å‡ºã€‚è¿™å¯ä»¥é€šè¿‡worker.disconnect()å‘é€æ–­å¼€ä¿¡å·ï¼Œè®¾ç½®è¶…æ—¶ï¼Œè‹¥è¶…æ—¶åä»æœªé€€å‡ºï¼Œåˆ™å¼ºåˆ¶å…³é—­ã€‚
>
> åŒæ—¶ï¼Œä¸»è¿›ç¨‹éœ€è¦ç»´æŠ¤æ–°æ—§workerçš„çŠ¶æ€ï¼Œæ¯”å¦‚ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡æ¥è®°å½•æ´»è·ƒçš„workerã€‚å½“æ–°workerä¸Šçº¿åï¼Œå…è®¸å…¶å¼€å§‹æ¥æ”¶è¿æ¥ï¼Œè€Œæ—§workeråœæ­¢æ¥æ”¶æ–°è¿æ¥ï¼Œä½†å¤„ç†å®Œç°æœ‰è¿æ¥åé€€å‡ºã€‚
>
> å¯èƒ½è¿˜éœ€è¦è€ƒè™‘TCPè¿æ¥çš„ä¼˜é›…å…³é—­ï¼Œæ¯”å¦‚ä½¿ç”¨server.close()æ¥åœæ­¢ç›‘å¬æ–°è¿æ¥ï¼Œä½†ä¿æŒç°æœ‰è¿æ¥ç›´åˆ°å®Œæˆã€‚æˆ–è€…ï¼Œç”¨æˆ·å¯èƒ½åœ¨ä½¿ç”¨HTTPæœåŠ¡å™¨ï¼Œè¿™æ—¶å€™éœ€è¦ç¡®ä¿åœ¨server.close()åç­‰å¾…è¯·æ±‚å¤„ç†å®Œæ¯•ã€‚
>
> å¦å¤–ï¼Œè´Ÿè½½å‡è¡¡çš„é—®é¢˜ã€‚ä¸»è¿›ç¨‹é€šå¸¸ä¼šä½¿ç”¨round-robinæ–¹å¼åˆ†é…è¿æ¥ï¼Œä½†åœ¨é‡å¯æœŸé—´ï¼Œæ–°çš„workeråº”è¯¥èƒ½å¤Ÿæ¥ç®¡æ–°çš„è¿æ¥ï¼Œè€Œæ—§workerå¤„ç†å®Œç°æœ‰è¿æ¥åé€€å‡ºï¼Œè¿™å¯èƒ½éœ€è¦æ£€æŸ¥è¿›ç¨‹çš„å·¥ä½œçŠ¶æ€ã€‚
>
> è¦æ³¨æ„çš„æ˜¯ï¼ŒNode.jsçš„clusteræ¨¡å—çš„é»˜è®¤è¡Œä¸ºæ˜¯ï¼Œå½“workeræ–­å¼€è¿æ¥åï¼Œå¦‚æœæœ‰ç°æœ‰è¿æ¥åœ¨å¤„ç†ä¸­ï¼Œä¸»è¿›ç¨‹ä¼šç­‰åˆ°è¿™äº›è¿æ¥å…³é—­åæ‰å®Œå…¨ç»ˆæ­¢workerã€‚ä½†å¯èƒ½éœ€è¦æ˜¾å¼å¤„ç†è¿™äº›æ­¥éª¤ï¼Œé¿å…å¼ºåˆ¶æ€æ­»è¿›ç¨‹å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚
>
> å¯èƒ½éœ€è¦ç¤ºä¾‹ä»£ç æ¥è¯´æ˜æ•´ä¸ªè¿‡ç¨‹ï¼Œä¸»è¿›ç¨‹å¦‚ä½•ç›‘å¬ä¿¡å·ï¼Œforkæ–°çš„workersï¼Œå¹¶é€æ­¥æ›¿æ¢æ—§çš„workersã€‚åŒæ—¶å±•ç¤ºå¦‚ä½•åœ¨workerä¸­å¤„ç†æ–­å¼€è¿æ¥çš„äº‹ä»¶ï¼Œå®ç°ä¼˜é›…é€€å‡ºã€‚
>
> ç”¨æˆ·å¯èƒ½é‡åˆ°çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯å…±äº«çŠ¶æ€çš„ç®¡ç†ï¼Œæ¯”å¦‚åœ¨å†…å­˜ä¸­çš„ä¼šè¯æˆ–è€…ç¼“å­˜æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçƒ­æ›´æ–°å¯èƒ½éœ€è¦è€ƒè™‘å°†è¿™äº›çŠ¶æ€ç§»åŠ¨åˆ°å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚Redisï¼‰ï¼Œæˆ–è€…åœ¨é‡å¯æ—¶è¿ç§»çŠ¶æ€ï¼Œä½†clusteræœ¬èº«å¹¶ä¸å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½éœ€è¦å…¶ä»–æœºåˆ¶ã€‚
>
> è¿˜éœ€è¦æ³¨æ„å­è¿›ç¨‹çš„é”™è¯¯å¤„ç†ï¼Œç¡®ä¿æ–°çš„workeråœ¨å¯åŠ¨å¤±è´¥æ—¶æœ‰é‡è¯•æˆ–å›é€€æœºåˆ¶ï¼Œé¿å…åœ¨çƒ­æ›´æ–°è¿‡ç¨‹ä¸­ç”±äºä»£ç é”™è¯¯å¯¼è‡´æ•´ä¸ªæœåŠ¡å´©æºƒã€‚
>
> æœ€åï¼Œæ€»ç»“å®ç°æ­¥éª¤ï¼šä¸»è¿›ç¨‹æ¥æ”¶ä¿¡å·ï¼Œforkæ–°workerï¼Œæ–°workerå‡†å¤‡å°±ç»ªåé€šçŸ¥ä¸»è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹å…³é—­æ—§workerï¼Œå¾ªç¯è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°æ‰€æœ‰workeræ›´æ–°å®Œæ¯•ã€‚æ•´ä¸ªè¿‡ç¨‹éœ€è¦ä¿è¯åœ¨ä»»ä½•æ—¶å€™éƒ½æœ‰è¶³å¤Ÿçš„workerå¤„ç†è¯·æ±‚ã€‚
>
> æµ‹è¯•æ–¹é¢ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦äº†è§£å¦‚ä½•æ¨¡æ‹Ÿçƒ­æ›´æ–°è¿‡ç¨‹ï¼Œå¦‚å‘é€ä¿¡å·ã€æ£€æŸ¥è¿æ¥æ˜¯å¦è¢«æ­£ç¡®å¤„ç†ç­‰ã€‚å¯èƒ½çš„é™·é˜±åŒ…æ‹¬æœªå¤„ç†çš„å·¥ä½œè¿›ç¨‹æ–­å¼€äº‹ä»¶ã€ä¿¡å·å¤„ç†å™¨æœªæ­£ç¡®è®¾ç½®ï¼Œæˆ–è€…ä¼˜é›…å…³é—­é€»è¾‘ä¸å¤Ÿå®Œå–„å¯¼è‡´èµ„æºæ³„æ¼ã€‚
>
> æ€»ç»“èµ·æ¥ï¼Œå›ç­”éœ€è¦æ¶µç›–clusteræ¨¡å—çš„çƒ­æ›´æ–°æµç¨‹ï¼Œä¿¡å·å¤„ç†ï¼Œä¼˜é›…å…³é—­workerï¼Œç»´æŠ¤è¿›ç¨‹åˆ—è¡¨ï¼Œä»¥åŠå¤„ç†å…±äº«èµ„æºå’ŒçŠ¶æ€çš„é—®é¢˜ï¼ŒåŒæ—¶æä¾›å¯æ“ä½œçš„ä»£ç ç¤ºä¾‹å’Œæ³¨æ„äº‹é¡¹ã€‚
>
> 



---

åœ¨ Node.js ä¸­ï¼Œåˆ©ç”¨ `cluster` æ¨¡å—å®ç° **é›¶åœæœºçƒ­æ›´æ–°ï¼ˆZero Downtime Reloadï¼‰** çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š**ä¸»è¿›ç¨‹ï¼ˆMasterï¼‰å¹³æ»‘é‡å¯å­è¿›ç¨‹ï¼ˆWorkerï¼‰**ï¼Œé€šè¿‡ *æ»šåŠ¨å¼æ›´æ–°* ç¡®ä¿æœåŠ¡å§‹ç»ˆæœ‰æ´»è·ƒè¿›ç¨‹å¤„ç†è¯·æ±‚ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ–¹æ¡ˆï¼Œåˆ† **åŸºç¡€å®ç°** å’Œ **è¿›é˜¶ä¼˜åŒ–** ä¸¤å¤§éƒ¨åˆ†ã€‚

---

### **1. åŸºç¡€çƒ­æ›´æ–°å®ç°**

#### **(1) æ ¸å¿ƒæµç¨‹**
```bash
      å¯åŠ¨æ–° Worker        å…³é—­æ—§ Worker
ä¸»è¿›ç¨‹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  
               (å¹¶è¡Œå¤„ç†æ–°æ—§ Worker è¯·æ±‚)
```

#### **(2) åŸºç¡€ä»£ç **

**ä¸»è¿›ç¨‹ï¼ˆmaster.jsï¼‰**ï¼š
```javascript
const cluster = require('cluster');
const numCPUs = require('os').cpus().length;

// å­˜å‚¨æ´»è·ƒçš„ worker
const workers = [];

if (cluster.isMaster) {
  // 1. åˆå§‹åŒ–å¯åŠ¨æ‰€æœ‰ worker
  for (let i = 0; i < numCPUs; i++) {
    startWorker();
  }

  // 2. ç›‘å¬ SIGHUP ä¿¡å·è§¦å‘çƒ­æ›´æ–°
  process.on('SIGHUP', () => {
    console.log('[Master] çƒ­æ›´æ–°å¼€å§‹...');
    restartWorkers();
  });

} else {
  // å­è¿›ç¨‹æ‰§è¡Œå®é™…æœåŠ¡ä»£ç 
  require('./server.js');
}

function startWorker() {
  const worker = cluster.fork();
  workers.push(worker);
  worker.on('exit', (code, signal) => {
    console.log(`[Worker ${worker.id}] é€€å‡º`);
    workers.splice(workers.indexOf(worker), 1);
  });
}

function restartWorkers() {
  const oldWorkers = [...workers];
  oldWorkers.forEach((worker) => {
    // å…ˆå¯åŠ¨æ–° worker
    const newWorker = cluster.fork();
    newWorker.on('listening', () => {
      console.log(`[Worker ${newWorker.id}] å·²å‡†å¤‡å¥½`);
      // å…³é—­æ—§ workerï¼ˆä¼˜é›…é€€å‡ºï¼‰
      worker.send('shutdown');
      worker.disconnect();
      setTimeout(() => {
        if (worker.isConnected()) {
          console.log(`[Worker ${worker.id}] å¼ºåˆ¶ç»ˆæ­¢`);
          worker.kill();
        }
      }, 5000); // 5 ç§’è¶…æ—¶å¼ºåˆ¶å…³é—­
    });
  });
}
```

**å­è¿›ç¨‹æœåŠ¡å™¨ï¼ˆserver.jsï¼‰**ï¼š
```javascript
const http = require('http');
const server = http.createServer((req, res) => {
  res.end(`è¯·æ±‚ç”±è¿›ç¨‹ ${process.pid} å¤„ç†`);
});
server.listen(3000);

// ç›‘å¬ä¸»è¿›ç¨‹çš„å…³é—­ä¿¡å·
process.on('message', (msg) => {
  if (msg === 'shutdown') {
    console.log(`[Worker ${process.pid}] æ”¶åˆ°å…³é—­ä¿¡å·`);
    server.close(() => {
      console.log(`[Worker ${process.pid}] æ‰€æœ‰è¿æ¥å·²å…³é—­`);
      process.exit(0);
    });
  }
});
```

---

### **2. è¿›é˜¶ä¼˜åŒ–æ–¹æ¡ˆ**

#### **(1) ä¿¡å·ä¼˜åŒ–ï¼šé¿å… SIGTERM/SIGINT å†²çª**
- **é—®é¢˜**ï¼šé»˜è®¤çš„ `SIGTERM` å¯èƒ½è¢«å…¶ä»–å·¥å…·è¯¯è§¦å‘ï¼ˆå¦‚ PM2ï¼‰ã€‚
- **è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨è‡ªå®šä¹‰ä¿¡å·ï¼ˆå¦‚ `SIGUSR2`ï¼‰ï¼š
  ```javascript
  process.on('SIGUSR2', () => { /* çƒ­æ›´æ–°é€»è¾‘ */ });
  ```

#### **(2) è¿æ¥æŒä¹…åŒ–ï¼šä»£ç†æˆ–å…±äº«ç«¯å£**
- **é€‰é¡¹ 1**ï¼šNginx åå‘ä»£ç†ç»´æŠ¤é•¿è¿æ¥æ± ã€‚
- **é€‰é¡¹ 2**ï¼šåˆ©ç”¨ Node.js `SO_REUSEPORT`ï¼ˆéœ€ Linux 3.9+ï¼‰ï¼š
  ```javascript
  server.listen({ port: 3000, reusePort: true });
  ```

#### **(3) çŠ¶æ€åŒæ­¥ï¼šå…±äº«ä¼šè¯æ•°æ®**
ä½¿ç”¨å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚ Redisï¼‰ç®¡ç†ä¼šè¯ï¼š
```javascript
// ä½¿ç”¨ Redis å­˜å‚¨ä¼šè¯
const session = require('express-session');
const RedisStore = require('connect-redis')(session);
app.use(session({
  store: new RedisStore({ host: 'localhost', port: 6379 }),
  secret: 'your-secret'
}));
```

#### **(4) æ— ç¼äº¤æ¥ï¼šç¡®ä¿æ–° Worker å°±ç»ªåå†å…³é—­æ—§è¿›ç¨‹**
é€šè¿‡ `ACK ç¡®è®¤æœºåˆ¶` æ§åˆ¶èŠ‚å¥ï¼š
```javascript
// ä¸»è¿›ç¨‹ç›‘å¬æ–° Worker çš„å°±ç»ªç¡®è®¤
newWorker.on('message', (msg) => {
  if (msg === 'ready') {
    worker.send('shutdown');
  }
});

// å­è¿›ç¨‹å¯åŠ¨å®Œæˆåå‘é€å°±ç»ªä¿¡å·
server.listen(3000, () => {
  process.send('ready');
});
```

#### **(5) å¥åº·æ£€æŸ¥ï¼šè‡ªæ„ˆå¼è¿›ç¨‹ç®¡ç†**
```javascript
// ä¸»è¿›ç¨‹å®šæœŸæ£€æŸ¥ Worker å¥åº·çŠ¶æ€
setInterval(() => {
  workers.forEach((worker) => {
    worker.send('healthcheck');
  });
}, 10000);

// Worker å“åº”å¥åº·æ£€æŸ¥
process.on('message', (msg) => {
  if (msg === 'healthcheck') {
    process.send('healthy');
  }
});
```

---

### **3. ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ**

#### **(1) ä½¿ç”¨ PM2 ç­‰å·¥å…·ç®€åŒ–ç®¡ç†**
PM2 å†…ç½®çƒ­æ›´æ–°å‘½ä»¤ï¼š
```bash
# é€šè¿‡å°è£…å¥½çš„ reload å‘½ä»¤è§¦å‘çƒ­æ›´æ–°
pm2 reload app.js
```

#### **(2) ä»£ç†å±‚é…ç½®ï¼ˆä»¥ Nginx ä¸ºä¾‹ï¼‰**
```nginx
upstream node_app {
  server 127.0.0.1:3000;
  # ä¿æŒé•¿è¿æ¥é¿å…ä¸­æ–­
  keepalive 64;
}

server {
  listen 80;
  location / {
    proxy_pass http://node_app;
    proxy_http_version 1.1;
    proxy_set_header Connection "";
  }
}
```

#### **(3) äº‘åŸç”Ÿæ–¹æ¡ˆï¼ˆKubernetesï¼‰**
é€šè¿‡ Kubernetes æ»šåŠ¨æ›´æ–°ç­–ç•¥å®ç°ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
spec:
  replicas: 4
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1      # å…è®¸ä¸´æ—¶è¶…å‡ºå‰¯æœ¬æ•°
      maxUnavailable: 0 # å§‹ç»ˆç¡®ä¿å…¨é‡å¯â½¤
```

---

### **4. ç»“è®º**

| **ç­–ç•¥**              | **é€‚ç”¨åœºæ™¯**                         | **ä¼˜åŠ¿**                                  |
|-----------------------|--------------------------------------|------------------------------------------|
| åŸºç¡€ä¿¡å·è§¦å‘          | å¿«é€ŸåŸå‹å¼€å‘                        | æ— éœ€é¢å¤–ä¾èµ–ï¼Œä»£ç ç®€å•                   |
| PM2 çƒ­åŠ è½½            | ç”Ÿäº§ç¯å¢ƒå¿«é€Ÿéƒ¨ç½²                    | è‡ªåŠ¨å¤„ç†ä¿¡å·ã€æ—¥å¿—åˆ‡å‰²                   |
| Kubernetes æ»šåŠ¨æ›´æ–°   | å¤§è§„æ¨¡å®¹å™¨åŒ–éƒ¨ç½²                    | å¥å£®çš„å¤±è´¥é‡è¯•å’Œå¥åº·æ£€æŸ¥                 |
| ä»£ç†å±‚ + çŠ¶æ€å¤–ç½®     | é«˜å¹¶å‘é•¿è¿æ¥åœºæ™¯                    | æ— ç¼è¿æ¥ç§»äº¤ï¼Œä¸šåŠ¡æ— æ„ŸçŸ¥æ›´æ–°             |


**å®ç°çƒ­æ›´æ–°çš„å…³é”®è¦ç‚¹**ï¼š
1. **åˆ†é˜¶æ®µæ›¿æ¢ Worker**ï¼šè‹¥æ—§è¿›ç¨‹æœ‰ 4 ä¸ªï¼Œæ¯æ¬¡åªé‡å¯ 1 ä¸ªï¼Œç¡®ä¿å‰©ä½™ 3 ä¸ªå¤„ç†è¯·æ±‚ã€‚
2. **ä¼˜é›…å…³é—­ï¼ˆGraceful Shutdownï¼‰**ï¼šä½¿ç”¨ `server.close()` åœæ­¢æ¥æ”¶æ–°è¯·æ±‚ï¼Œä½†å¤„ç†å®Œç°æœ‰è¯·æ±‚å†é€€å‡ºã€‚
3. **è¶…æ—¶å¼ºåˆ¶ç»ˆæ­¢**ï¼šé˜²æ­¢å¼‚å¸¸è¿›ç¨‹å¡ä½é•¿æœŸä¸é€€å‡ºã€‚
