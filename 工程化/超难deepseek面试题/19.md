> ğŸ’­ å¥½çš„ï¼Œç”¨æˆ·ç°åœ¨æå‡ºäº†æ–°çš„é—®é¢˜ï¼Œå…³äºç°åº¦å‘å¸ƒå’Œæ¸è¿›å¼å‘å¸ƒçš„å·¥ç¨‹åŒ–å®ç°æ–¹æ¡ˆï¼Œä»¥åŠå‰ç«¯å¦‚ä½•è¿›è¡ŒABæµ‹è¯•ã€‚æˆ‘éœ€è¦ä»ä¹‹å‰çš„å¯¹è¯èƒŒæ™¯å‡ºå‘ï¼Œç”¨æˆ·ä¹‹å‰å·²ç»äº†è§£äº†Jestçš„Mockå’Œä»£ç è¦†ç›–ç‡çš„åŸç†ï¼Œä»¥åŠReduxçš„å•å…ƒæµ‹è¯•ï¼Œç°åœ¨è½¬å‘éƒ¨ç½²å’Œæµ‹è¯•ç­–ç•¥ï¼Œæ˜¾ç„¶ä»–ä»¬åœ¨æ­å»ºä¸€ä¸ªå®Œæ•´çš„å¼€å‘å’Œéƒ¨ç½²æµç¨‹ï¼Œå¸Œæœ›ç¡®ä¿å„ä¸ªé˜¶æ®µçš„ä»£ç è´¨é‡å’Œå‘å¸ƒå®‰å…¨ã€‚
>
> é¦–å…ˆï¼Œç°åº¦å‘å¸ƒå’Œæ¸è¿›å¼å‘å¸ƒæ˜¯ä¸¤ä¸ªç›¸å…³ä½†ç•¥æœ‰ä¸åŒçš„æ¦‚å¿µã€‚æˆ‘éœ€è¦å…ˆåŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œé¿å…æ··æ·†ç”¨æˆ·ã€‚ç°åº¦å‘å¸ƒé€šå¸¸æ˜¯æŒ‡é€æ­¥å‘ç”¨æˆ·ç¾¤ä½“æ¨å‡ºæ–°ç‰ˆæœ¬ï¼Œæ¯”å¦‚å…ˆè®©å†…éƒ¨å‘˜å·¥è¯•ç”¨ï¼Œå†é€æ¸æ‰©å¤§èŒƒå›´åˆ°éƒ¨åˆ†ç”¨æˆ·ï¼Œæœ€åå…¨é¢å‘å¸ƒã€‚è€Œæ¸è¿›å¼å‘å¸ƒå¯èƒ½åŒ…æ‹¬å¤šç§ç­–ç•¥ï¼Œæ¯”å¦‚é‡‘ä¸é›€å‘å¸ƒã€è“ç»¿éƒ¨ç½²ç­‰ï¼Œä¸è¿‡æœ‰æ—¶å€™è¿™ä¸¤ä¸ªæœ¯è¯­ä¼šè¢«æ··ç”¨ã€‚å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“å…·ä½“çš„å®ç°æ–¹æ¡ˆï¼Œæ¯”å¦‚é€šè¿‡Kubernetesçš„æµé‡åˆ‡åˆ†ã€Nginxçš„æƒé‡é…ç½®ï¼Œæˆ–è€…äº‘æœåŠ¡å¦‚AWSçš„å‘å¸ƒå·¥å…·ã€‚
>
> æ¥ä¸‹æ¥ï¼Œå…³äºå‰ç«¯ABæµ‹è¯•çš„å®ç°ã€‚ABæµ‹è¯•é€šå¸¸ç”¨äºæ¯”è¾ƒä¸åŒç‰ˆæœ¬çš„é¡µé¢æˆ–åŠŸèƒ½å¯¹ç”¨æˆ·è¡Œä¸ºçš„å½±å“ã€‚å‰ç«¯éœ€è¦èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·æ ‡ç­¾æˆ–åˆ†ç»„å±•ç¤ºä¸åŒçš„UIï¼Œå¹¶æ”¶é›†æ•°æ®è¿›è¡Œåˆ†æã€‚éœ€è¦è€ƒè™‘å¦‚ä½•æ‹†åˆ†æµé‡ï¼Œå¦‚ä½•ä¿è¯ç”¨æˆ·çš„ä¸€è‡´æ€§ï¼ˆæ¯”å¦‚åŒä¸€ç”¨æˆ·æ¯æ¬¡è®¿é—®éƒ½çœ‹åˆ°åŒä¸€ç‰ˆæœ¬ï¼‰ï¼Œä»¥åŠå¦‚ä½•ä¸åç«¯åä½œä¼ é€’å®éªŒå‚æ•°ã€‚å¯èƒ½æ¶‰åŠçš„å·¥å…·åŒ…æ‹¬Google Optimizeã€Optimizelyï¼Œæˆ–è€…è‡ªå»ºçš„ç³»ç»Ÿã€‚
>
> æˆ‘éœ€è¦è¯¦ç»†é˜è¿°ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š
>
> 1. ç°åº¦å‘å¸ƒçš„å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼š
>
>    - åŸºäºåŸºç¡€è®¾æ–½çš„æµé‡æ§åˆ¶ï¼šä½¿ç”¨Kubernetesçš„Service Meshï¼ˆå¦‚Istioï¼‰è¿›è¡Œæµé‡åˆ‡åˆ†ï¼Œè®¾ç½®ä¸åŒç‰ˆæœ¬çš„Podï¼Œå¹¶é€šè¿‡VirtualServiceåˆ†é…æµé‡æ¯”ä¾‹ã€‚
>
>    - ä½¿ç”¨ç½‘å…³å±‚è·¯ç”±ï¼šå¦‚Nginxçš„split_clientsæ¨¡å—ï¼Œæ ¹æ®å®¢æˆ·ç«¯IPæˆ–Cookieæ¥å†³å®šè½¬å‘åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚
>
>    - ç‰¹å¾æ ‡æ§åˆ¶ï¼šé€šè¿‡ç”¨æˆ·IDã€è®¾å¤‡ç±»å‹ã€åœ°ç†ä½ç½®ç­‰ç‰¹å¾è¿›è¡Œç”¨æˆ·åˆ†æ¡¶ï¼Œåœ¨åº”ç”¨å±‚å®ç°è·¯ç”±é€»è¾‘ã€‚
>
> 2. å‰ç«¯ABæµ‹è¯•çš„å®ç°è¦ç‚¹ï¼š
>
>    - å®éªŒåˆ†ç»„é€»è¾‘ï¼šç¡®å®šéšæœºåˆ†ç»„çš„ç®—æ³•ï¼Œå¦‚åŸºäºç”¨æˆ·IDçš„å“ˆå¸Œå–æ¨¡ï¼Œç¡®ä¿åŒä¸€ç”¨æˆ·å§‹ç»ˆè¿›å…¥åŒä¸€åˆ†ç»„ã€‚
>
>    - åŠ¨æ€åŠ è½½é…ç½®ï¼šé€šè¿‡é…ç½®ä¸­å¿ƒæˆ–CDNåŠ¨æ€è·å–å®éªŒæ–¹æ¡ˆï¼Œæ— éœ€é‡æ–°éƒ¨ç½²ä»£ç ã€‚
>
>    - æ•°æ®æ”¶é›†ä¸åˆ†æï¼šä¸æ•°æ®åˆ†æå¹³å°é›†æˆï¼Œè·Ÿè¸ªå…³é”®æŒ‡æ ‡å¦‚ç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ç­‰ã€‚
>
>    - ä»£ç å±‚é¢çš„æ— ä¾µå…¥è®¾è®¡ï¼šä½¿ç”¨é«˜é˜¶ç»„ä»¶æˆ–è£…é¥°å™¨æ¨¡å¼ï¼Œå°†ABæµ‹è¯•é€»è¾‘ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤å’Œä¸‹çº¿å®éªŒã€‚
>
> åœ¨è®²è§£å®ç°æ–¹æ¡ˆæ—¶ï¼Œå¯èƒ½éœ€è¦ä¸¾ä¾‹è¯´æ˜å…·ä½“çš„ä»£ç æˆ–é…ç½®ï¼Œæ¯”å¦‚å¦‚ä½•ä½¿ç”¨Nginxé…ç½®æµé‡åˆ†å‰²ï¼Œæˆ–è€…å‰ç«¯å¦‚ä½•æ ¹æ®ä¸åŒåˆ†ç»„æ¸²æŸ“ä¸åŒç»„ä»¶ã€‚åŒæ—¶ï¼Œåº”è¯¥æåˆ°ç°åº¦å‘å¸ƒå’ŒABæµ‹è¯•çš„ç›‘æ§ä¸å›æ»šæœºåˆ¶ï¼Œç¡®ä¿åœ¨å‡ºç°é—®é¢˜æ—¶èƒ½å¤Ÿå¿«é€Ÿå“åº”ã€‚
>
> ç”¨æˆ·çš„æ·±å±‚éœ€æ±‚å¯èƒ½åŒ…æ‹¬å¦‚ä½•åœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒçš„æƒ…å†µä¸‹å®‰å…¨åœ°éªŒè¯æ–°åŠŸèƒ½ï¼Œä»¥åŠå¦‚ä½•é«˜æ•ˆæ”¶é›†å’Œåˆ†ææµ‹è¯•æ•°æ®ã€‚å› æ­¤ï¼Œé™¤äº†æŠ€æœ¯å®ç°ï¼Œè¿˜éœ€è¦ç®€è¦æåŠæœ€ä½³å®è·µï¼Œæ¯”å¦‚é€æ­¥æ‰©å¤§æµé‡æ¯”ä¾‹ã€è®¾ç½®å…³é”®æŒ‡æ ‡é˜ˆå€¼ã€è‡ªåŠ¨åŒ–ç›‘æ§æŠ¥è­¦ç­‰ã€‚
>
> å¯èƒ½éœ€è¦æ³¨æ„çš„ç‚¹ï¼š
>
> - ç°åº¦å‘å¸ƒå’ŒABæµ‹è¯•çš„å…³ç³»ï¼šABæµ‹è¯•å¯ä»¥ä½œä¸ºç°åº¦å‘å¸ƒçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºæ¯”è¾ƒä¸åŒç‰ˆæœ¬çš„æ€§èƒ½ã€‚
>
> - å‰åç«¯åä½œï¼šæŸäº›ABæµ‹è¯•éœ€è¦åç«¯é…åˆè¿”å›ä¸åŒæ•°æ®ï¼Œéœ€è¦è€ƒè™‘æ¥å£çš„å…¼å®¹æ€§ã€‚
>
> - æ•°æ®ä¸€è‡´æ€§ï¼šç¡®ä¿å®éªŒæœŸé—´çš„æ—¥å¿—æ”¶é›†å‡†ç¡®æ— è¯¯ï¼Œé¿å…æ•°æ®æ±¡æŸ“ã€‚
>
> - ç”¨æˆ·ä½“éªŒä¸€è‡´æ€§ï¼šç¡®ä¿ç”¨æˆ·åœ¨ä¸åŒé˜¶æ®µæˆ–ä¸åŒåˆ†ç»„ä¸­çš„ä½“éªŒè¿è´¯ï¼Œæ¯”å¦‚åŒä¸€ç”¨æˆ·åœ¨ä¸åŒè®¾å¤‡ä¸Šåº”å±äºåŒä¸€åˆ†ç»„ã€‚
>
> éœ€è¦é¿å…è¿‡äºæ·±å…¥ç‰¹å®šå·¥å…·çš„å®ç°ï¼Œè€Œæ˜¯èšç„¦äºé€šç”¨æ–¹æ¡ˆå’ŒåŸç†ï¼ŒåŒæ—¶ç»™å‡ºå…·ä½“çš„ä¾‹å­å¸®åŠ©ç”¨æˆ·ç†è§£ã€‚
>
> 



### ä¸€ã€ç°åº¦å‘å¸ƒäº”çº§é€’è¿›å®æ–½æ–¹æ¡ˆ

```mermaid
graph TD
    A[ä»£ç ä»“åº“] --> B[é•œåƒæ„å»º]
    B --> C[å†…ç½‘é¢„å‘éªŒè¯]
    C --> D[ç°åº¦åˆ†é˜¶æ®µä¸Šçº¿]
    D -->|å¼‚å¸¸ç†”æ–­| E[è‡ªåŠ¨å›æ»š]
    D -->|æŒ‡æ ‡è¾¾æ ‡| F[å…¨é‡å‘å¸ƒ]
```

#### 1. ç°åº¦è§„åˆ™å¼•æ“å®ç°
```nginx
# Nginxæµé‡åˆ†å‰²ç­–ç•¥ç¤ºä¾‹
split_clients $request_id $variant {
    10%     "v2_service";
    20%     "v1.1_canary";
    70%     "v1_stable";
}

upstream v2_service {
    server 10.1.0.1:8080;
}

location /api {
    proxy_pass http://$variant; 
}
```

#### 2. Kubernetesç²¾ç»†åŒ–æ§åˆ¶
```yaml
# Istio VirtualService é…ç½®
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
spec:
  hosts:
  - product-service
  http:
  - route:
    - destination:
        host: product-service
        subset: v1
      weight: 90
    - destination:
        host: product-service
        subset: v2-canary
      weight: 10
```

### äºŒã€å‰ç«¯ABæµ‹è¯•æŠ€æœ¯çŸ©é˜µ

```mermaid
graph LR
    A[ç”¨æˆ·è¯·æ±‚] --> B[å®éªŒè·¯ç”±å±‚]
    B --> C{å®éªŒåˆ¤æ–­é€»è¾‘}
    C -->|å®éªŒç»„A| D[æ¸²æŸ“VariantA]
    C -->|å¯¹ç…§ç»„B| E[æ¸²æŸ“VariantB]
    D --> F[åŸ‹ç‚¹æ•°æ®é‡‡é›†]
    E --> F
    F --> G[æ•°æ®åˆ†æå¹³å°]
```

#### 1. åˆ†ç»„ç­–ç•¥æ ¸å¿ƒä»£ç 
```javascript
// ç¡®å®šæ€§å“ˆå¸Œåˆ†ç»„ç®—æ³•
function getExperimentGroup(userId, experimentId) {
  const hash = cyrb128(userId + experimentId)[0];
  return hash % 100 < 20 ? 'A' : 'B'; // 20%æµé‡åˆ†é…å®éªŒç»„A
}

// ABæµ‹è¯•ç»„ä»¶å°è£…
const withABTest = (experimentId, variants) => (WrappedComponent) => {
  return (props) => {
    const userId = getCurrentUserID();
    const variant = getExperimentGroup(userId, experimentId);
    return <WrappedComponent {...props} variant={variants[variant]} />;
  };
};
```

### ä¸‰ã€å…³é”®æ¶æ„åˆ†å±‚è®¾è®¡

| å±‚çº§        | åŠŸèƒ½ç»„ä»¶                      | æŠ€æœ¯å®ç°ç¤ºä¾‹                          |
|-------------|-----------------------------|-------------------------------------|
| æµé‡å…¥å£å±‚   | ç”¨æˆ·èº«ä»½æ ‡è¯†                  | CookieæŒ‡çº¹/SDKè®¾å¤‡IDç”Ÿæˆ             |
| ç­–ç•¥å†³ç­–å±‚   | å®éªŒè§„åˆ™å¼•æ“                  | è§„åˆ™å¼•æ“æœåŠ¡/åŠ¨æ€é…ç½®ä¸­å¿ƒ              |
| æ¸²æŸ“æ‰§è¡Œå±‚   | å·®å¼‚åŒ–UIç»„ä»¶                 | Reacté«˜é˜¶ç»„ä»¶/Vueæ··åˆæŒ‡ä»¤              |
| æ•°æ®é‡‡é›†å±‚   | è¡Œä¸ºæ—¥å¿—æ”¶é›†                  | Beacon API/WebSocketå®æ—¶ä¸ŠæŠ¥           |
| åˆ†æå†³ç­–å±‚   | å®éªŒæ•ˆæœå¯è§†åŒ–                | ELK Stack/Tableauå®æ—¶çœ‹æ¿             |

### å››ã€å®éªŒå¹³å°é…ç½®åŒ–ç¤ºä¾‹

```json
{
  "experimentId": "2023_checkout_button",
  "description": "ç»“è´¦æŒ‰é’®é¢œè‰²ä¼˜åŒ–å®éªŒ",
  "owner": "growth-team",
  "variants": {
    "A": {"color": "#FF4500", "text": "ç«‹å³è´­ä¹°"},
    "B": {"color": "#20B2AA", "text": "é©¬ä¸ŠæŠ¢è´­"}
  },
  "metrics": ["conversion_rate", "avg_order_value"],
  "targetUsers": ["china_mobile_users"],
  "rolloutStrategy": {
    "startTime": "2023-07-01T00:00:00Z",
    "stages": [
      {"duration": "24h", "trafficPercent": 5},
      {"duration": "48h", "trafficPercent": 30},
      {"duration": "72h", "trafficPercent": 100}
    ]
  }
}
```

### äº”ã€æ•°æ®å¯¹æ¯”æ´å¯Ÿæ¨¡å‹

```javascript
// å®éªŒæ•ˆæœéªŒè¯ç®—æ³•ç¤ºä¾‹
function calculateImprovement(control, treatment) {
  const conversionDiff = treatment.conversionRate - control.conversionRate;
  const confidence = mannWhitneyUTest(control.samples, treatment.samples);
  
  return {
    effectSize: conversionDiff,
    statisticalSignificance: confidence > 0.95,
    samplesNeeded: powerAnalysis(0.8, 0.05)
  };
}
```

### å…­ã€ç¾éš¾ç†”æ–­æ¢å¤æœºåˆ¶
```mermaid
sequenceDiagram
    ç›‘æ§ç³»ç»Ÿ->>+å®éªŒå¹³å°: å¼‚å¸¸æŒ‡æ ‡è§¦å‘é˜ˆå€¼
    å®éªŒå¹³å°->>+é…ç½®ä¸­å¿ƒ: å‘é€å…³é—­å®éªŒæŒ‡ä»¤
    é…ç½®ä¸­å¿ƒ->>+CDNèŠ‚ç‚¹: æ¨é€ç´§æ€¥é…ç½®(5ç§’å†…ç”Ÿæ•ˆ)
    CDNèŠ‚ç‚¹->>+å‰ç«¯åº”ç”¨: å¼ºåˆ¶æ€§é™çº§é»˜è®¤æ–¹æ¡ˆ
    å‰ç«¯åº”ç”¨-->>-æ•°æ®çœ‹æ¿: çŠ¶æ€åˆ‡æ¢äº‹ä»¶ä¸ŠæŠ¥
```

æ˜¯å¦éœ€è¦ç»§ç»­æ·±å…¥ï¼š
1. å¦‚ä½•è®¾è®¡ç”¨æˆ·åˆ†æ¡¶ç®—æ³•é¿å…æµé‡å€¾æ–œ
2. ç”¨æˆ·èº«ä»½æ ‡è¯†ä½“ç³»çš„æœ€ä½³å®è·µæ–¹æ¡ˆ
3. å¤šå˜é‡æ­£äº¤å®éªŒçš„å®ç°åŸç†
4. æ— æœåŠ¡åŒ–æ¶æ„ä¸‹çš„ç°åº¦å‘å¸ƒç‰¹æ®Šå¤„ç†ï¼Ÿ
