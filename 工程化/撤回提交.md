要撤回上一次提交的代码更改，可以使用 Git 的 `git revert` 或 `git reset` 命令。以下是两种方法的详细步骤：

### 方法一：使用 `git revert`

`git revert` 命令会创建一个新的提交，撤销上一次提交的更改。这种方法是安全的，因为它不会修改提交历史。

1. **查看提交历史**：
   ```bash
   git log
   ```
   找到你想要撤回的提交的哈希值（通常是最近的一次提交）。

2. **撤回上一次提交**：
   ```bash
   git revert HEAD
   ```
   这将创建一个新的提交，撤销上一次提交的更改。

3. **推送更改到远程仓库**（如果需要）：
   ```bash
   git push origin <branch-name>
   ```

### 方法二：使用 `git reset`

`git reset` 命令可以将当前分支的 HEAD 指针重置到指定的提交。这种方法会修改提交历史，因此需要谨慎使用，特别是在已经推送到远程仓库的情况下。

1. **查看提交历史**：
   ```bash
   git log
   ```
   找到你想要撤回的提交的哈希值（通常是最近的一次提交）。

2. **软重置到上一个提交**（保留工作目录的更改）：
   ```bash
   git reset --soft HEAD~1
   ```
   这将撤回上一次提交，但保留工作目录中的更改。

3. **硬重置到上一个提交**（丢弃工作目录的更改）：
   ```bash
   git reset --hard HEAD~1
   ```
   这将撤回上一次提交，并丢弃工作目录中的更改。

4. **推送更改到远程仓库**（如果需要）：
   如果你已经将更改推送到远程仓库，并且需要强制推送重置后的历史，请使用以下命令：
   ```bash
   git push origin <branch-name> --force
   ```

### 注意事项

- **使用 `git revert`**：推荐在已经推送到远程仓库的情况下使用，因为它不会修改提交历史。
- **使用 `git reset`**：在本地开发时可以使用，但在已经推送到远程仓库的情况下需要谨慎，特别是使用 `--hard` 选项时。

通过以上方法，你可以撤回上一次提交的更改，并根据需要将更改推送到远程仓库。
