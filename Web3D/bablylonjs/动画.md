å¥½çš„ï¼åœ¨å‰é¢æˆ‘ä»¬è¯¦ç»†è®²è§£äº† **ç¯å¢ƒè´´å›¾ï¼ˆEnvironment Textureï¼‰å’Œåå°„æ•ˆæœ**ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥ Babylon.js çš„å¦ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼š**åŠ¨ç”»ï¼ˆAnimationï¼‰**ã€‚

---

## **åŠ¨ç”»ï¼ˆAnimationï¼‰**

### **1. ä»€ä¹ˆæ˜¯åŠ¨ç”»ï¼Ÿ**
åœ¨ Babylon.js ä¸­ï¼ŒåŠ¨ç”»æ˜¯æŒ‡å¯¹ 3D å¯¹è±¡çš„å±æ€§ï¼ˆå¦‚ä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾ã€é¢œè‰²ç­‰ï¼‰è¿›è¡ŒåŠ¨æ€å˜åŒ–ã€‚é€šè¿‡åŠ¨ç”»ï¼Œä½ å¯ä»¥è®©åœºæ™¯ä¸­çš„å¯¹è±¡åŠ¨èµ·æ¥ï¼Œæ¯”å¦‚ï¼š
- ç§»åŠ¨ä¸€ä¸ªç‰©ä½“ã€‚
- æ—‹è½¬ä¸€ä¸ªç‰©ä½“ã€‚
- æ”¹å˜ç‰©ä½“çš„é¢œè‰²æˆ–é€æ˜åº¦ã€‚
- åˆ›å»ºå¤æ‚çš„åŠ¨ç”»åºåˆ—ã€‚

Babylon.js æä¾›äº†å¼ºå¤§çš„åŠ¨ç”»ç³»ç»Ÿï¼Œæ”¯æŒå…³é”®å¸§åŠ¨ç”»ï¼ˆKeyframe Animationï¼‰å’Œéª¨éª¼åŠ¨ç”»ï¼ˆSkeletal Animationï¼‰ã€‚

---

### **2. åŠ¨ç”»çš„åŸºæœ¬æ¦‚å¿µ**
åœ¨ Babylon.js ä¸­ï¼ŒåŠ¨ç”»çš„æ ¸å¿ƒæ˜¯ `BABYLON.Animation` ç±»ã€‚ä»¥ä¸‹æ˜¯åŠ¨ç”»çš„åŸºæœ¬æ¦‚å¿µï¼š

#### **(1) åŠ¨ç”»ç›®æ ‡**
åŠ¨ç”»ç›®æ ‡æ˜¯æŒ‡ä½ æƒ³è¦æ”¹å˜çš„å¯¹è±¡å±æ€§ï¼Œæ¯”å¦‚ï¼š
- ä½ç½®ï¼ˆ`position`ï¼‰
- æ—‹è½¬ï¼ˆ`rotation` æˆ– `rotationQuaternion`ï¼‰
- ç¼©æ”¾ï¼ˆ`scaling`ï¼‰
- æè´¨å±æ€§ï¼ˆå¦‚ `diffuseColor`ï¼‰

#### **(2) åŠ¨ç”»ç±»å‹**
åŠ¨ç”»ç±»å‹å†³å®šäº†åŠ¨ç”»çš„æ’å€¼æ–¹å¼ï¼Œæ¯”å¦‚ï¼š
- `BABYLON.Animation.ANIMATIONTYPE_FLOAT`ï¼šç”¨äºæ•°å€¼ç±»å‹çš„å±æ€§ï¼ˆå¦‚ä½ç½®çš„ x åæ ‡ï¼‰ã€‚
- `BABYLON.Animation.ANIMATIONTYPE_VECTOR3`ï¼šç”¨äº `BABYLON.Vector3` ç±»å‹çš„å±æ€§ï¼ˆå¦‚ä½ç½®æˆ–ç¼©æ”¾ï¼‰ã€‚
- `BABYLON.Animation.ANIMATIONTYPE_COLOR3`ï¼šç”¨äº `BABYLON.Color3` ç±»å‹çš„å±æ€§ï¼ˆå¦‚é¢œè‰²ï¼‰ã€‚
- `BABYLON.Animation.ANIMATIONTYPE_QUATERNION`ï¼šç”¨äºå››å…ƒæ•°ï¼ˆ`BABYLON.Quaternion`ï¼‰ç±»å‹çš„å±æ€§ï¼ˆå¦‚æ—‹è½¬ï¼‰ã€‚

#### **(3) åŠ¨ç”»å¾ªç¯æ¨¡å¼**
åŠ¨ç”»å¯ä»¥æ˜¯ä¸€æ¬¡æ€§æ’­æ”¾ï¼Œä¹Ÿå¯ä»¥å¾ªç¯æ’­æ”¾ï¼š
- `BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE`ï¼šå¾ªç¯æ’­æ”¾ã€‚
- `BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT`ï¼šæ’­æ”¾ä¸€æ¬¡åä¿æŒæœ€åçš„çŠ¶æ€ã€‚
- `BABYLON.Animation.ANIMATIONLOOPMODE_RELATIVE`ï¼šæ¯æ¬¡æ’­æ”¾æ—¶ç›¸å¯¹å¢åŠ ã€‚

---

### **3. åˆ›å»ºä¸€ä¸ªç®€å•çš„åŠ¨ç”»**
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•è®©ä¸€ä¸ªç«‹æ–¹ä½“æ²¿ X è½´ç§»åŠ¨ã€‚

#### **ä»£ç ç¤ºä¾‹ï¼šè®©ç«‹æ–¹ä½“æ²¿ X è½´ç§»åŠ¨**
```javascript
// åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“
const box = BABYLON.MeshBuilder.CreateBox("box", {}, scene);

// åˆ›å»ºåŠ¨ç”»
const animation = new BABYLON.Animation(
    "boxAnimation", // åŠ¨ç”»åç§°
    "position.x",   // åŠ¨ç”»ç›®æ ‡å±æ€§ï¼ˆè¿™é‡Œæ˜¯ X è½´ä½ç½®ï¼‰
    30,             // æ¯ç§’å¸§æ•°
    BABYLON.Animation.ANIMATIONTYPE_FLOAT, // åŠ¨ç”»ç±»å‹
    BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE // å¾ªç¯æ¨¡å¼
);

// å®šä¹‰å…³é”®å¸§
const keyFrames = [];
keyFrames.push({ frame: 0, value: 0 });  // èµ·å§‹ä½ç½®
keyFrames.push({ frame: 30, value: 5 }); // ä¸­é—´ä½ç½®
keyFrames.push({ frame: 60, value: 0 }); // ç»“æŸä½ç½®

// å°†å…³é”®å¸§æ·»åŠ åˆ°åŠ¨ç”»
animation.setKeys(keyFrames);

// å°†åŠ¨ç”»æ·»åŠ åˆ°ç«‹æ–¹ä½“
box.animations = [animation];

// å¼€å§‹åŠ¨ç”»
scene.beginAnimation(box, 0, 60, true); // ä»ç¬¬ 0 å¸§æ’­æ”¾åˆ°ç¬¬ 60 å¸§ï¼Œå¾ªç¯æ’­æ”¾
```

#### **ä»£ç è§£é‡Š**
1. **`BABYLON.Animation`**ï¼šåˆ›å»ºä¸€ä¸ªåŠ¨ç”»å¯¹è±¡ã€‚
   - `"position.x"`ï¼šè¡¨ç¤ºåŠ¨ç”»ç›®æ ‡æ˜¯ç«‹æ–¹ä½“çš„ X è½´ä½ç½®ã€‚
   - `30`ï¼šæ¯ç§’å¸§æ•°ï¼ˆFPSï¼‰ã€‚
   - `ANIMATIONTYPE_FLOAT`ï¼šè¡¨ç¤ºç›®æ ‡å±æ€§æ˜¯ä¸€ä¸ªæ•°å€¼ã€‚
   - `ANIMATIONLOOPMODE_CYCLE`ï¼šè¡¨ç¤ºåŠ¨ç”»ä¼šå¾ªç¯æ’­æ”¾ã€‚

2. **å…³é”®å¸§ï¼ˆKeyframesï¼‰**ï¼š
   - æ¯ä¸ªå…³é”®å¸§å®šä¹‰äº†ä¸€ä¸ªæ—¶é—´ç‚¹ï¼ˆ`frame`ï¼‰å’Œå¯¹åº”çš„å±æ€§å€¼ï¼ˆ`value`ï¼‰ã€‚
   - åŠ¨ç”»ä¼šåœ¨å…³é”®å¸§ä¹‹é—´æ’å€¼ï¼Œç”Ÿæˆå¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœã€‚

3. **`scene.beginAnimation`**ï¼š
   - å¼€å§‹æ’­æ”¾åŠ¨ç”»ã€‚
   - å‚æ•°åˆ†åˆ«æ˜¯ï¼šç›®æ ‡å¯¹è±¡ã€èµ·å§‹å¸§ã€ç»“æŸå¸§ã€æ˜¯å¦å¾ªç¯ã€‚

---

### **4. åŠ¨ç”»çš„å…¶ä»–å±æ€§**
é™¤äº†ä½ç½®ï¼Œä½ è¿˜å¯ä»¥å¯¹å…¶ä»–å±æ€§è¿›è¡ŒåŠ¨ç”»ï¼Œæ¯”å¦‚æ—‹è½¬ã€ç¼©æ”¾ã€é¢œè‰²ç­‰ã€‚

#### **(1) æ—‹è½¬åŠ¨ç”»**
```javascript
const rotationAnimation = new BABYLON.Animation(
    "rotationAnimation",
    "rotation.y", // åŠ¨ç”»ç›®æ ‡æ˜¯ Y è½´æ—‹è½¬
    30,
    BABYLON.Animation.ANIMATIONTYPE_FLOAT,
    BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE
);

const rotationKeyFrames = [];
rotationKeyFrames.push({ frame: 0, value: 0 });       // èµ·å§‹è§’åº¦
rotationKeyFrames.push({ frame: 30, value: Math.PI }); // æ—‹è½¬ 180 åº¦
rotationKeyFrames.push({ frame: 60, value: 0 });      // å›åˆ°èµ·å§‹è§’åº¦

rotationAnimation.setKeys(rotationKeyFrames);
box.animations.push(rotationAnimation);
scene.beginAnimation(box, 0, 60, true);
```

#### **(2) ç¼©æ”¾åŠ¨ç”»**
```javascript
const scalingAnimation = new BABYLON.Animation(
    "scalingAnimation",
    "scaling", // åŠ¨ç”»ç›®æ ‡æ˜¯ç¼©æ”¾
    30,
    BABYLON.Animation.ANIMATIONTYPE_VECTOR3,
    BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE
);

const scalingKeyFrames = [];
scalingKeyFrames.push({ frame: 0, value: new BABYLON.Vector3(1, 1, 1) }); // åŸå§‹å¤§å°
scalingKeyFrames.push({ frame: 30, value: new BABYLON.Vector3(2, 2, 2) }); // æ”¾å¤§ 2 å€
scalingKeyFrames.push({ frame: 60, value: new BABYLON.Vector3(1, 1, 1) }); // å›åˆ°åŸå§‹å¤§å°

scalingAnimation.setKeys(scalingKeyFrames);
box.animations.push(scalingAnimation);
scene.beginAnimation(box, 0, 60, true);
```

#### **(3) é¢œè‰²åŠ¨ç”»**
```javascript
const material = new BABYLON.StandardMaterial("material", scene);
box.material = material;

const colorAnimation = new BABYLON.Animation(
    "colorAnimation",
    "diffuseColor", // åŠ¨ç”»ç›®æ ‡æ˜¯æè´¨çš„é¢œè‰²
    30,
    BABYLON.Animation.ANIMATIONTYPE_COLOR3,
    BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE
);

const colorKeyFrames = [];
colorKeyFrames.push({ frame: 0, value: new BABYLON.Color3(1, 0, 0) }); // çº¢è‰²
colorKeyFrames.push({ frame: 30, value: new BABYLON.Color3(0, 1, 0) }); // ç»¿è‰²
colorKeyFrames.push({ frame: 60, value: new BABYLON.Color3(0, 0, 1) }); // è“è‰²

colorAnimation.setKeys(colorKeyFrames);
material.animations = [colorAnimation];
scene.beginAnimation(material, 0, 60, true);
```

---

### **5. åŠ¨ç”»çš„ç»¼åˆç¤ºä¾‹**
ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•åŒæ—¶å¯¹ä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾å’Œé¢œè‰²è¿›è¡ŒåŠ¨ç”»ã€‚

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babylon.js åŠ¨ç”»ç¤ºä¾‹</title>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
</head>
<body>
    <canvas id="renderCanvas" style="width: 100%; height: 100%;"></canvas>

    <script>
        const canvas = document.getElementById("renderCanvas");
        const engine = new BABYLON.Engine(canvas, true);

        const createScene = function () {
            const scene = new BABYLON.Scene(engine);

            // æ·»åŠ æ‘„åƒæœº
            const camera = new BABYLON.ArcRotateCamera("camera", Math.PI / 2, Math.PI / 2, 10, BABYLON.Vector3.Zero(), scene);
            camera.attachControl(canvas, true);

            // æ·»åŠ å…‰æº
            const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);

            // åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“
            const box = BABYLON.MeshBuilder.CreateBox("box", {}, scene);

            // åˆ›å»ºæè´¨
            const material = new BABYLON.StandardMaterial("material", scene);
            box.material = material;

            // åŠ¨ç”»ï¼šä½ç½®
            const positionAnimation = new BABYLON.Animation("positionAnimation", "position.x", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);
            positionAnimation.setKeys([
                { frame: 0, value: 0 },
                { frame: 30, value: 5 },
                { frame: 60, value: 0 }
            ]);
            box.animations.push(positionAnimation);

            // åŠ¨ç”»ï¼šæ—‹è½¬
            const rotationAnimation = new BABYLON.Animation("rotationAnimation", "rotation.y", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);
            rotationAnimation.setKeys([
                { frame: 0, value: 0 },
                { frame: 30, value: Math.PI },
                { frame: 60, value: 0 }
            ]);
            box.animations.push(rotationAnimation);

            // åŠ¨ç”»ï¼šç¼©æ”¾
            const scalingAnimation = new BABYLON.Animation("scalingAnimation", "scaling", 30, BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);
            scalingAnimation.setKeys([
                { frame: 0, value: new BABYLON.Vector3(1, 1, 1) },
                { frame: 30, value: new BABYLON.Vector3(2, 2, 2) },
                { frame: 60, value: new BABYLON.Vector3(1, 1, 1) }
            ]);
            box.animations.push(scalingAnimation);

            // åŠ¨ç”»ï¼šé¢œè‰²
            const colorAnimation = new BABYLON.Animation("colorAnimation", "material.diffuseColor", 30, BABYLON.Animation.ANIMATIONTYPE_COLOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);
            colorAnimation.setKeys([
                { frame: 0, value: new BABYLON.Color3(1, 0, 0) },
                { frame: 30, value: new BABYLON.Color3(0, 1, 0) },
                { frame: 60, value: new BABYLON.Color3(0, 0, 1) }
            ]);
            material.animations = [colorAnimation];

            // å¼€å§‹åŠ¨ç”»
            scene.beginAnimation(box, 0, 60, true);
            scene.beginAnimation(material, 0, 60, true);

            return scene;
        };

        const scene = createScene();

        engine.runRenderLoop(function () {
            scene.render();
        });

        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
</body>
</html>
```

---

### **6. è¿è¡Œæ•ˆæœ**
1. æ‰“å¼€æµè§ˆå™¨è¿è¡Œä¸Šè¿°ä»£ç ã€‚
2. ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç«‹æ–¹ä½“ï¼š
   - åœ¨ X è½´ä¸Šæ¥å›ç§»åŠ¨ã€‚
   - ç»• Y è½´æ—‹è½¬ã€‚
   - åœ¨å¤§å°ä¹‹é—´æ¥å›ç¼©æ”¾ã€‚
   - é¢œè‰²åœ¨çº¢ã€ç»¿ã€è“ä¹‹é—´å¾ªç¯å˜åŒ–ã€‚

---

### **7. å°ç»“**
- **åŠ¨ç”»ç³»ç»Ÿ** æ˜¯ Babylon.js çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œæ”¯æŒå¯¹å‡ ä¹æ‰€æœ‰å±æ€§è¿›è¡ŒåŠ¨ç”»ã€‚
- **å…³é”®å¸§** å®šä¹‰äº†åŠ¨ç”»çš„æ—¶é—´ç‚¹å’Œå¯¹åº”çš„å±æ€§å€¼ã€‚
- **åŠ¨ç”»ç±»å‹** å†³å®šäº†ç›®æ ‡å±æ€§çš„ç±»å‹ï¼ˆå¦‚æ•°å€¼ã€å‘é‡ã€é¢œè‰²ç­‰ï¼‰ã€‚
- **åŠ¨ç”»å¾ªç¯æ¨¡å¼** å†³å®šäº†åŠ¨ç”»çš„æ’­æ”¾æ–¹å¼ï¼ˆå¾ªç¯ã€ä¸€æ¬¡æ€§ç­‰ï¼‰ã€‚

---

å¦‚æœä½ å¯¹å…¶ä»–éƒ¨åˆ†ï¼ˆæ¯”å¦‚äº¤äº’ã€ç²’å­ç³»ç»Ÿç­‰ï¼‰æ„Ÿå…´è¶£ï¼Œæˆ–è€…æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼ ğŸ˜Š
