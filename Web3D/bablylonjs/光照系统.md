å¥½çš„ï¼æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†è®²è§£ **å…‰ç…§ç³»ç»Ÿï¼ˆLighting Systemï¼‰**ï¼Œè¿™æ˜¯ Babylon.js ä¸­éå¸¸é‡è¦çš„åŠŸèƒ½ä¹‹ä¸€ã€‚å…‰ç…§æ˜¯ 3D åœºæ™¯ä¸­ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ï¼Œå®ƒå†³å®šäº†åœºæ™¯ä¸­ç‰©ä½“çš„äº®åº¦ã€é˜´å½±å’Œæ•´ä½“æ°›å›´ã€‚

---

## **å…‰ç…§ç³»ç»Ÿï¼ˆLighting Systemï¼‰**

### **1. ä»€ä¹ˆæ˜¯å…‰ç…§ï¼Ÿ**
å…‰ç…§æ˜¯ 3D åœºæ™¯ä¸­æ¨¡æ‹ŸçœŸå®ä¸–ç•Œå…‰çº¿çš„æŠ€æœ¯ã€‚é€šè¿‡å…‰ç…§ï¼Œåœºæ™¯ä¸­çš„ç‰©ä½“å¯ä»¥å‘ˆç°å‡ºæ˜æš—å¯¹æ¯”ã€é˜´å½±ã€åå°„ç­‰æ•ˆæœï¼Œä»è€Œè®©åœºæ™¯æ›´åŠ çœŸå®å’Œç”ŸåŠ¨ã€‚

åœ¨ Babylon.js ä¸­ï¼Œå…‰æºæ˜¯é€šè¿‡ `BABYLON.Light` ç±»åŠå…¶å­ç±»å®ç°çš„ã€‚ä¸åŒç±»å‹çš„å…‰æºæœ‰ä¸åŒçš„ç‰¹æ€§å’Œç”¨é€”ã€‚

---

### **2. å…‰æºçš„ç±»å‹**
Babylon.js æä¾›äº†ä»¥ä¸‹å‡ ç§å¸¸è§çš„å…‰æºç±»å‹ï¼š

#### **2.1 ç¯å¢ƒå…‰ï¼ˆHemispheric Lightï¼‰**
- ç¯å¢ƒå…‰æ˜¯ä¸€ç§å…¨å±€å…‰æºï¼Œç”¨äºä¸ºåœºæ™¯æä¾›åŸºç¡€çš„å‡åŒ€å…‰ç…§ã€‚
- å®ƒæ²¡æœ‰æ˜ç¡®çš„æ–¹å‘ï¼Œé€šå¸¸ç”¨äºæ¨¡æ‹Ÿå¤©ç©ºå…‰ã€‚

```javascript
const light = new BABYLON.HemisphericLight("hemisphericLight", new BABYLON.Vector3(0, 1, 0), scene);
light.intensity = 0.7; // è®¾ç½®å…‰ç…§å¼ºåº¦
```

- **å‚æ•°è§£é‡Š**ï¼š
  - `"hemisphericLight"`ï¼šå…‰æºçš„åç§°ã€‚
  - `new BABYLON.Vector3(0, 1, 0)`ï¼šå…‰æºçš„æ–¹å‘ï¼ˆä»ä¸Šå¾€ä¸‹ï¼‰ã€‚
  - `intensity`ï¼šå…‰ç…§å¼ºåº¦ï¼Œé»˜è®¤å€¼ä¸º 1ã€‚

---

#### **2.2 ç‚¹å…‰æºï¼ˆPoint Lightï¼‰**
- ç‚¹å…‰æºæ˜¯ä»ä¸€ä¸ªç‚¹å‘æ‰€æœ‰æ–¹å‘å‘å°„å…‰çº¿çš„å…‰æºï¼Œç±»ä¼¼äºç°å®ä¸­çš„ç¯æ³¡ã€‚
- å®ƒçš„å…‰ç…§å¼ºåº¦ä¼šéšç€è·ç¦»çš„å¢åŠ è€Œå‡å¼±ã€‚

```javascript
const light = new BABYLON.PointLight("pointLight", new BABYLON.Vector3(0, 5, 0), scene);
light.intensity = 1; // è®¾ç½®å…‰ç…§å¼ºåº¦
```

- **å‚æ•°è§£é‡Š**ï¼š
  - `"pointLight"`ï¼šå…‰æºçš„åç§°ã€‚
  - `new BABYLON.Vector3(0, 5, 0)`ï¼šå…‰æºçš„ä½ç½®ã€‚
  - `intensity`ï¼šå…‰ç…§å¼ºåº¦ã€‚

---

#### **2.3 å¹³è¡Œå…‰ï¼ˆDirectional Lightï¼‰**
- å¹³è¡Œå…‰æ˜¯ä»ä¸€ä¸ªæ–¹å‘å‘å°„çš„å…‰çº¿ï¼Œç±»ä¼¼äºå¤ªé˜³å…‰ã€‚
- å®ƒçš„å…‰çº¿æ˜¯å¹³è¡Œçš„ï¼Œä¸ä¼šéšç€è·ç¦»çš„å¢åŠ è€Œå‡å¼±ã€‚

```javascript
const light = new BABYLON.DirectionalLight("directionalLight", new BABYLON.Vector3(-1, -2, -1), scene);
light.intensity = 0.8; // è®¾ç½®å…‰ç…§å¼ºåº¦
```

- **å‚æ•°è§£é‡Š**ï¼š
  - `"directionalLight"`ï¼šå…‰æºçš„åç§°ã€‚
  - `new BABYLON.Vector3(-1, -2, -1)`ï¼šå…‰æºçš„æ–¹å‘ã€‚
  - `intensity`ï¼šå…‰ç…§å¼ºåº¦ã€‚

---

#### **2.4 èšå…‰ç¯ï¼ˆSpot Lightï¼‰**
- èšå…‰ç¯æ˜¯ä¸€ç§é”¥å½¢å…‰æºï¼Œç±»ä¼¼äºæ‰‹ç”µç­’ã€‚
- å®ƒçš„å…‰çº¿ä¼šé›†ä¸­åœ¨ä¸€ä¸ªæ–¹å‘ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªé”¥å½¢çš„å…‰ç…§èŒƒå›´ã€‚

```javascript
const light = new BABYLON.SpotLight("spotLight", new BABYLON.Vector3(0, 10, 0), new BABYLON.Vector3(0, -1, 0), Math.PI / 3, 2, scene);
light.intensity = 1; // è®¾ç½®å…‰ç…§å¼ºåº¦
```

- **å‚æ•°è§£é‡Š**ï¼š
  - `"spotLight"`ï¼šå…‰æºçš„åç§°ã€‚
  - `new BABYLON.Vector3(0, 10, 0)`ï¼šå…‰æºçš„ä½ç½®ã€‚
  - `new BABYLON.Vector3(0, -1, 0)`ï¼šå…‰æºçš„æ–¹å‘ã€‚
  - `Math.PI / 3`ï¼šå…‰é”¥çš„è§’åº¦ï¼ˆå¼§åº¦åˆ¶ï¼‰ã€‚
  - `2`ï¼šå…‰ç…§çš„è¡°å‡ç³»æ•°ã€‚
  - `intensity`ï¼šå…‰ç…§å¼ºåº¦ã€‚

---

### **3. å…‰æºçš„å±æ€§**

#### **3.1 å¼ºåº¦ï¼ˆIntensityï¼‰**
- `light.intensity`ï¼šæ§åˆ¶å…‰æºçš„äº®åº¦ã€‚
- å€¼è¶Šå¤§ï¼Œå…‰æºè¶Šäº®ï¼›å€¼ä¸º 0 æ—¶ï¼Œå…‰æºå…³é—­ã€‚

```javascript
light.intensity = 0.5; // è®¾ç½®å…‰ç…§å¼ºåº¦ä¸º 50%
```

#### **3.2 é¢œè‰²ï¼ˆDiffuse å’Œ Specularï¼‰**
- `light.diffuse`ï¼šå…‰æºçš„æ¼«åå°„é¢œè‰²ï¼ˆå½±å“ç‰©ä½“çš„ä¸»è¦é¢œè‰²ï¼‰ã€‚
- `light.specular`ï¼šå…‰æºçš„é«˜å…‰é¢œè‰²ï¼ˆå½±å“ç‰©ä½“çš„åå°„é«˜å…‰ï¼‰ã€‚

```javascript
light.diffuse = new BABYLON.Color3(1, 0, 0); // çº¢è‰²å…‰
light.specular = new BABYLON.Color3(1, 1, 1); // ç™½è‰²é«˜å…‰
```

#### **3.3 èŒƒå›´ï¼ˆRangeï¼‰**
- `light.range`ï¼šæ§åˆ¶å…‰æºçš„å½±å“èŒƒå›´ï¼ˆé€‚ç”¨äºç‚¹å…‰æºå’Œèšå…‰ç¯ï¼‰ã€‚

```javascript
light.range = 10; // å…‰æºçš„å½±å“èŒƒå›´ä¸º 10 ä¸ªå•ä½
```

---

### **4. é˜´å½±ï¼ˆShadowsï¼‰**

#### **4.1 ä»€ä¹ˆæ˜¯é˜´å½±ï¼Ÿ**
é˜´å½±æ˜¯å…‰çº¿è¢«ç‰©ä½“é˜»æŒ¡åå½¢æˆçš„æš—åŒºã€‚Babylon.js æ”¯æŒåŠ¨æ€é˜´å½±ï¼Œå¯ä»¥è®©åœºæ™¯æ›´åŠ çœŸå®ã€‚

#### **4.2 åˆ›å»ºé˜´å½±**
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä¸ºåœºæ™¯ä¸­çš„ç‰©ä½“æ·»åŠ é˜´å½±ï¼š

```javascript
// åˆ›å»ºä¸€ä¸ªå¹³è¡Œå…‰
const light = new BABYLON.DirectionalLight("directionalLight", new BABYLON.Vector3(-1, -2, -1), scene);

// åˆ›å»ºä¸€ä¸ªé˜´å½±ç”Ÿæˆå™¨
const shadowGenerator = new BABYLON.ShadowGenerator(1024, light); // 1024 æ˜¯é˜´å½±è´´å›¾çš„åˆ†è¾¨ç‡
shadowGenerator.useBlurExponentialShadowMap = true; // å¯ç”¨æ¨¡ç³Šé˜´å½±
shadowGenerator.blurScale = 2; // è°ƒæ•´æ¨¡ç³Šç¨‹åº¦

// ä¸ºéœ€è¦æŠ•å°„é˜´å½±çš„ç‰©ä½“å¯ç”¨é˜´å½±
shadowGenerator.addShadowCaster(mesh);

// ä¸ºæ¥æ”¶é˜´å½±çš„ç‰©ä½“å¯ç”¨æ¥æ”¶é˜´å½±
ground.receiveShadows = true;
```

- **`ShadowGenerator`**ï¼š
  - åˆ›å»ºä¸€ä¸ªé˜´å½±ç”Ÿæˆå™¨ã€‚
  - å‚æ•°æ˜¯é˜´å½±è´´å›¾çš„åˆ†è¾¨ç‡ï¼ˆè¶Šé«˜è¶Šæ¸…æ™°ï¼Œä½†æ€§èƒ½å¼€é”€ä¹Ÿè¶Šå¤§ï¼‰ã€‚

- **`addShadowCaster`**ï¼š
  - å°†éœ€è¦æŠ•å°„é˜´å½±çš„ç‰©ä½“æ·»åŠ åˆ°é˜´å½±ç”Ÿæˆå™¨ä¸­ã€‚

- **`receiveShadows`**ï¼š
  - å¯ç”¨æ¥æ”¶é˜´å½±çš„åŠŸèƒ½ã€‚

---

### **5. ç¤ºä¾‹ï¼šå…‰ç…§å’Œé˜´å½±çš„ç»¼åˆåº”ç”¨**

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸åŒç±»å‹çš„å…‰æºå’Œé˜´å½±ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babylon.js å…‰ç…§å’Œé˜´å½±ç¤ºä¾‹</title>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
</head>
<body>
    <canvas id="renderCanvas" style="width: 100%; height: 100%;"></canvas>

    <script>
        const canvas = document.getElementById("renderCanvas");
        const engine = new BABYLON.Engine(canvas, true);

        const createScene = function () {
            const scene = new BABYLON.Scene(engine);

            // æ·»åŠ æ‘„åƒæœº
            const camera = new BABYLON.ArcRotateCamera("camera", Math.PI / 2, Math.PI / 2, 10, BABYLON.Vector3.Zero(), scene);
            camera.attachControl(canvas, true);

            // æ·»åŠ å…‰æº
            const light = new BABYLON.DirectionalLight("directionalLight", new BABYLON.Vector3(-1, -2, -1), scene);
            light.intensity = 1;

            // åˆ›å»ºä¸€ä¸ªå¹³é¢
            const ground = BABYLON.MeshBuilder.CreateGround("ground", { width: 10, height: 10 }, scene);
            ground.receiveShadows = true; // å¯ç”¨æ¥æ”¶é˜´å½±

            // åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“
            const box = BABYLON.MeshBuilder.CreateBox("box", {}, scene);
            box.position.y = 1;

            // åˆ›å»ºä¸€ä¸ªçƒä½“
            const sphere = BABYLON.MeshBuilder.CreateSphere("sphere", { diameter: 1 }, scene);
            sphere.position.set(2, 1, 0);

            // åˆ›å»ºé˜´å½±ç”Ÿæˆå™¨
            const shadowGenerator = new BABYLON.ShadowGenerator(1024, light);
            shadowGenerator.addShadowCaster(box);
            shadowGenerator.addShadowCaster(sphere);

            return scene;
        };

        const scene = createScene();

        engine.runRenderLoop(function () {
            scene.render();
        });

        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
</body>
</html>
```

---

### **6. è¿è¡Œæ•ˆæœ**
1. æ‰“å¼€æµè§ˆå™¨è¿è¡Œä¸Šè¿°ä»£ç ã€‚
2. ä½ ä¼šçœ‹åˆ°ï¼š
   - ä¸€ä¸ªå¹³è¡Œå…‰ç…§äº®äº†åœºæ™¯ã€‚
   - ä¸€ä¸ªç«‹æ–¹ä½“å’Œä¸€ä¸ªçƒä½“æŠ•å°„äº†åŠ¨æ€é˜´å½±ã€‚
   - é˜´å½±ä¼šéšç€ç‰©ä½“çš„ä½ç½®å’Œå…‰æºçš„æ–¹å‘åŠ¨æ€å˜åŒ–ã€‚

---

### **7. å…‰ç…§ç³»ç»Ÿçš„åº”ç”¨åœºæ™¯**
1. **ç¯å¢ƒå…‰**ï¼šä¸ºåœºæ™¯æä¾›åŸºç¡€å…‰ç…§ã€‚
2. **ç‚¹å…‰æº**ï¼šæ¨¡æ‹Ÿç¯æ³¡ã€ç«ç‚¬ç­‰å…‰æºã€‚
3. **å¹³è¡Œå…‰**ï¼šæ¨¡æ‹Ÿå¤ªé˜³å…‰ã€‚
4. **èšå…‰ç¯**ï¼šæ¨¡æ‹Ÿæ‰‹ç”µç­’ã€èˆå°ç¯å…‰ç­‰ã€‚
5. **é˜´å½±**ï¼šä¸ºåœºæ™¯æ·»åŠ çœŸå®æ„Ÿã€‚

---

### **8. å°ç»“**
- **å…‰ç…§ç³»ç»Ÿ** æ˜¯ Babylon.js ä¸­éå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œç”¨äºä¸ºåœºæ™¯æä¾›å…‰ç…§å’Œé˜´å½±ã€‚
- ä¸åŒç±»å‹çš„å…‰æºæœ‰ä¸åŒçš„ç”¨é€”ï¼Œæ¯”å¦‚ç¯å¢ƒå…‰ç”¨äºåŸºç¡€å…‰ç…§ï¼Œç‚¹å…‰æºç”¨äºå±€éƒ¨å…‰ç…§ï¼Œå¹³è¡Œå…‰ç”¨äºæ¨¡æ‹Ÿå¤ªé˜³å…‰ã€‚
- é˜´å½±å¯ä»¥é€šè¿‡ `ShadowGenerator` å®ç°ï¼Œä¸ºåœºæ™¯æ·»åŠ çœŸå®æ„Ÿã€‚

---

å¦‚æœä½ å¯¹å…¶ä»–éƒ¨åˆ†ï¼ˆæ¯”å¦‚è™šæ‹Ÿç°å®ã€ç‰©ç†å¼•æ“ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼‰æ„Ÿå…´è¶£ï¼Œæˆ–è€…æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼ ğŸ˜Š
