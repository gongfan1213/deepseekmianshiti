### GAMES101 课程内容详细翻译  
**主讲人：Lingqi Yan，加州大学圣塔芭芭拉分校**  

---

### 公告  
- **作业 2**  
  - 目前已有 45 份提交  
  - 提交的作业方向颠倒了？没关系  
  - 论坛（BBS）中有活跃的讨论，表现不错  

- **下一次作业**  
  - 主题是关于**着色（Shading）**  

- **今天的主题**  
  - 内容简单，但涉及很多  

---

### 上一节课回顾  
**着色（一）**  
- **Blinn-Phong 反射模型**  
  - 漫反射（Diffuse）  
  - 镜面反射（Specular）  
  - 环境光（Ambient）  
  - 在特定的着色点进行计算  

---

### 今天的内容  
**着色（二）**  
- **Blinn-Phong 反射模型**  
  - 镜面反射和环境光项  
- **着色频率**  
- **图形渲染管线**  
- **纹理映射（Texture Mapping）**  
- **重心坐标（Barycentric Coordinates）**  

---

### 回顾：Lambertian（漫反射）项  
- **与视角方向无关的着色**  
- 漫反射公式：  
  \[
  L_d = k_d \cdot \frac{I}{r^2} \cdot \max(0, \mathbf{n} \cdot \mathbf{l})
  \]  
  - \( k_d \)：漫反射系数（颜色）  
  - \( I \)：光源强度  
  - \( r \)：光源到着色点的距离  
  - \( \mathbf{n} \)：法向量  
  - \( \mathbf{l} \)：光线方向  

- **能量传递过程**：  
  - 到达着色点的光能量  
  - 从着色点漫反射的光能量  

---

### 漫反射项的效果  
- **产生漫反射外观**  
- 参考图示：[Foley et al.]  

---

### 镜面反射项（Blinn-Phong 模型）  
- **强度依赖于视角方向**  
- **在接近镜面反射方向时最亮**  

---

### 镜面反射项的计算（Blinn-Phong 模型）  
- 当视角方向 \( \mathbf{v} \) 接近镜面反射方向时，使用**半程向量（Half Vector）** \( \mathbf{h} \) 来近似：  
  \[
  \mathbf{h} = \frac{\mathbf{v} + \mathbf{l}}{\|\mathbf{v} + \mathbf{l}\|}
  \]  
- 镜面反射公式：  
  \[
  L_s = k_s \cdot \frac{I}{r^2} \cdot \max(0, \mathbf{n} \cdot \mathbf{h})^p
  \]  
  - \( k_s \)：镜面反射系数  
  - \( p \)：高光指数，控制反射光斑的宽窄  

---

### 余弦幂次图示  
- 增大 \( p \) 值会使反射光斑变窄  
- 参考图示：[Foley et al.]  

---

### 镜面反射项的总结（Blinn-Phong 模型）  
- **公式总结**：  
  \[
  L_s = k_s \cdot \frac{I}{r^2} \cdot \max(0, \mathbf{n} \cdot \mathbf{h})^p
  \]  
- **注意**：图中同时展示了漫反射项 \( L_d \) 和镜面反射项 \( L_s \) 的效果  

---

### 环境光项  
- **与任何方向无关的着色**  
- 添加一个常量颜色，用于补偿未考虑的光照，并填充黑色阴影区域  
- **注意**：这是一种近似方法，效果是“假的”  

- 环境光公式：  
  \[
  L_a = k_a \cdot I_a
  \]  
  - \( k_a \)：环境光系数  
  - \( I_a \)：环境光强度  

---

### Blinn-Phong 反射模型总结  
- **总光照公式**：  
  \[
  L = L_a + L_d + L_s
  \]  
  - \( L_a \)：环境光项  
  - \( L_d \)：漫反射项  
  - \( L_s \)：镜面反射项  

- 展开公式：  
  \[
  L = k_a \cdot I_a + k_d \cdot \frac{I}{r^2} \cdot \max(0, \mathbf{n} \cdot \mathbf{l}) + k_s \cdot \frac{I}{r^2} \cdot \max(0, \mathbf{n} \cdot \mathbf{h})^p
  \]  

---

### 着色频率  
- **是什么导致了着色的差异？**  

---

### 每个三角形的着色（平面着色）  
- **平面着色（Flat Shading）**：  
  - 每个三角形面是平的，使用一个法向量  
  - **缺点**：不适合平滑表面  

---

### 每个顶点的着色（Gouraud 着色）  
- **Gouraud 着色**：  
  - 从顶点的颜色插值到整个三角形  
  - 每个顶点都有一个法向量（如何获得？）  

---

### 每个像素的着色（Phong 着色）  
- **Phong 着色**：  
  - 在每个三角形内插法向量  
  - 在每个像素计算完整的着色模型  
  - **注意**：这不是 Blinn-Phong 反射模型  

---

### 着色频率：面、顶点或像素  
- **对比不同的着色频率**：  
  - 面着色（Flat）：每个三角形一个颜色  
  - 顶点着色（Gouraud）：插值顶点颜色  
  - 像素着色（Phong）：插值法向量并逐像素计算  

---

### 定义每个顶点的法向量  
- **最佳方法**：从几何体的基础形状中获取顶点法向量  
  - 例如：对于球体，直接使用其几何法向量  

- **推导法向量的简单方法**：  
  - 平均周围三角形面的法向量  

---  

**问题？**
